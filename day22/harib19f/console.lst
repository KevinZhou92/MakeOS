     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_task_now
     7 00000000                                 	EXTERN	_memman_alloc_4k
     8 00000000                                 	EXTERN	_fifo32_init
     9 00000000                                 	EXTERN	_timer_alloc
    10 00000000                                 	EXTERN	_timer_init
    11 00000000                                 	EXTERN	_timer_settime
    12 00000000                                 	EXTERN	_file_readfat
    13 00000000                                 	EXTERN	_io_cli
    14 00000000                                 	EXTERN	_fifo32_status
    15 00000000                                 	EXTERN	_fifo32_get
    16 00000000                                 	EXTERN	_io_sti
    17 00000000                                 	EXTERN	_boxfill8
    18 00000000                                 	EXTERN	_sheet_refresh
    19 00000000                                 	EXTERN	_task_sleep
    20 00000000                                 	EXTERN	_putfonts8_asc_sht
    21 00000000                                 	EXTERN	_memman_total
    22 00000000                                 	EXTERN	_sprintf
    23 00000000                                 	EXTERN	_file_search
    24 00000000                                 	EXTERN	_file_loadfile
    25 00000000                                 	EXTERN	_memman_free_4k
    26 00000000                                 	EXTERN	_set_segmdesc
    27 00000000                                 	EXTERN	_start_app
    28 00000000                                 	EXTERN	_sheet_alloc
    29 00000000                                 	EXTERN	_sheet_setbuf
    30 00000000                                 	EXTERN	_make_window8
    31 00000000                                 	EXTERN	_sheet_slide
    32 00000000                                 	EXTERN	_sheet_updown
    33 00000000                                 [FILE "console.c"]
    34                                          [SECTION .text]
    35 00000000                                 	GLOBAL	_console_task
    36 00000000                                 _console_task:
    37 00000000 55                              	PUSH	EBP
    38 00000001 89 E5                           	MOV	EBP,ESP
    39 00000003 57                              	PUSH	EDI
    40 00000004 56                              	PUSH	ESI
    41 00000005 53                              	PUSH	EBX
    42 00000006 8D 9D FFFFFDE4                  	LEA	EBX,DWORD [-540+EBP]
    43 0000000C 81 EC 0000023C                  	SUB	ESP,572
    44 00000012 E8 [00000000]                   	CALL	_task_now
    45 00000017 68 00002D00                     	PUSH	11520
    46 0000001C 68 003C0000                     	PUSH	3932160
    47 00000021 89 85 FFFFFDC0                  	MOV	DWORD [-576+EBP],EAX
    48 00000027 E8 [00000000]                   	CALL	_memman_alloc_4k
    49 0000002C 8B B5 FFFFFDC0                  	MOV	ESI,DWORD [-576+EBP]
    50 00000032 C7 85 FFFFFDE8 00000008         	MOV	DWORD [-536+EBP],8
    51 0000003C 89 85 FFFFFDBC                  	MOV	DWORD [-580+EBP],EAX
    52 00000042 83 C6 10                        	ADD	ESI,16
    53 00000045 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
    54 00000048 89 85 FFFFFDE4                  	MOV	DWORD [-540+EBP],EAX
    55 0000004E 8D 85 FFFFFDF4                  	LEA	EAX,DWORD [-524+EBP]
    56 00000054 C7 85 FFFFFDEC 0000001C         	MOV	DWORD [-532+EBP],28
    57 0000005E C7 85 FFFFFDF0 FFFFFFFF         	MOV	DWORD [-528+EBP],-1
    58 00000068 89 1D 00000FEC                  	MOV	DWORD [4076],EBX
    59 0000006E FF B5 FFFFFDC0                  	PUSH	DWORD [-576+EBP]
    60 00000074 50                              	PUSH	EAX
    61 00000075 68 00000080                     	PUSH	128
    62 0000007A 56                              	PUSH	ESI
    63 0000007B E8 [00000000]                   	CALL	_fifo32_init
    64 00000080 E8 [00000000]                   	CALL	_timer_alloc
    65 00000085 6A 01                           	PUSH	1
    66 00000087 56                              	PUSH	ESI
    67 00000088 89 C7                           	MOV	EDI,EAX
    68 0000008A 50                              	PUSH	EAX
    69 0000008B E8 [00000000]                   	CALL	_timer_init
    70 00000090 83 C4 24                        	ADD	ESP,36
    71 00000093 6A 32                           	PUSH	50
    72 00000095 57                              	PUSH	EDI
    73 00000096 E8 [00000000]                   	CALL	_timer_settime
    74 0000009B 68 00100200                     	PUSH	1049088
    75 000000A0 FF B5 FFFFFDBC                  	PUSH	DWORD [-580+EBP]
    76 000000A6 E8 [00000000]                   	CALL	_file_readfat
    77 000000AB 6A 01                           	PUSH	1
    78 000000AD 6A 3E                           	PUSH	62
    79 000000AF 53                              	PUSH	EBX
    80 000000B0 E8 00000237                     	CALL	_cons_putchar
    81 000000B5 83 C4 1C                        	ADD	ESP,28
    82 000000B8                                 L2:
    83 000000B8 E8 [00000000]                   	CALL	_io_cli
    84 000000BD 8B 9D FFFFFDC0                  	MOV	EBX,DWORD [-576+EBP]
    85 000000C3 83 C3 10                        	ADD	EBX,16
    86 000000C6 53                              	PUSH	EBX
    87 000000C7 E8 [00000000]                   	CALL	_fifo32_status
    88 000000CC 5E                              	POP	ESI
    89 000000CD 85 C0                           	TEST	EAX,EAX
    90 000000CF 0F 84 00000201                  	JE	L24
    91 000000D5 53                              	PUSH	EBX
    92 000000D6 E8 [00000000]                   	CALL	_fifo32_get
    93 000000DB 89 C6                           	MOV	ESI,EAX
    94 000000DD E8 [00000000]                   	CALL	_io_sti
    95 000000E2 59                              	POP	ECX
    96 000000E3 83 FE 01                        	CMP	ESI,1
    97 000000E6 0F 8E 00000197                  	JLE	L25
    98 000000EC                                 L7:
    99 000000EC 83 FE 02                        	CMP	ESI,2
   100 000000EF 0F 84 0000017F                  	JE	L26
   101 000000F5                                 L12:
   102 000000F5 83 FE 03                        	CMP	ESI,3
   103 000000F8 0F 84 0000013F                  	JE	L27
   104 000000FE                                 L13:
   105 000000FE 8D 9E FFFFFF00                  	LEA	EBX,DWORD [-256+ESI]
   106 00000104 89 9D FFFFFDB8                  	MOV	DWORD [-584+EBP],EBX
   107 0000010A 81 FB 000000FF                  	CMP	EBX,255
   108 00000110 77 54                           	JA	L14
   109 00000112 81 FE 00000108                  	CMP	ESI,264
   110 00000118 0F 84 000000F6                  	JE	L28
   111 0000011E 81 FE 0000010A                  	CMP	ESI,266
   112 00000124 0F 84 00000099                  	JE	L29
   113 0000012A 8B 8D FFFFFDE8                  	MOV	ECX,DWORD [-536+EBP]
   114 00000130 81 F9 000000EF                  	CMP	ECX,239
   115 00000136 7F 2E                           	JG	L14
   116 00000138 89 C8                           	MOV	EAX,ECX
   117 0000013A BA 00000008                     	MOV	EDX,8
   118 0000013F 89 D3                           	MOV	EBX,EDX
   119 00000141 6A 01                           	PUSH	1
   120 00000143 99                              	CDQ
   121 00000144 F7 FB                           	IDIV	EBX
   122 00000146 89 C1                           	MOV	ECX,EAX
   123 00000148 89 F0                           	MOV	EAX,ESI
   124 0000014A 88 84 0D FFFFFDC2               	MOV	BYTE [-574+EBP+ECX*1],AL
   125 00000151 8D 85 FFFFFDE4                  	LEA	EAX,DWORD [-540+EBP]
   126 00000157 FF B5 FFFFFDB8                  	PUSH	DWORD [-584+EBP]
   127 0000015D 50                              	PUSH	EAX
   128 0000015E                                 L22:
   129 0000015E E8 00000189                     	CALL	_cons_putchar
   130 00000163                                 L23:
   131 00000163 83 C4 0C                        	ADD	ESP,12
   132 00000166                                 L14:
   133 00000166 83 BD FFFFFDF0 00               	CMP	DWORD [-528+EBP],0
   134 0000016D 78 2E                           	JS	L21
   135 0000016F 8B 8D FFFFFDEC                  	MOV	ECX,DWORD [-532+EBP]
   136 00000175 8B 95 FFFFFDE8                  	MOV	EDX,DWORD [-536+EBP]
   137 0000017B 8D 41 0F                        	LEA	EAX,DWORD [15+ECX]
   138 0000017E 50                              	PUSH	EAX
   139 0000017F 8D 42 07                        	LEA	EAX,DWORD [7+EDX]
   140 00000182 50                              	PUSH	EAX
   141 00000183 51                              	PUSH	ECX
   142 00000184 8B 4D 08                        	MOV	ECX,DWORD [8+EBP]
   143 00000187 52                              	PUSH	EDX
   144 00000188 0F B6 85 FFFFFDF0               	MOVZX	EAX,BYTE [-528+EBP]
   145 0000018F 50                              	PUSH	EAX
   146 00000190 FF 71 04                        	PUSH	DWORD [4+ECX]
   147 00000193 FF 31                           	PUSH	DWORD [ECX]
   148 00000195 E8 [00000000]                   	CALL	_boxfill8
   149 0000019A 83 C4 1C                        	ADD	ESP,28
   150 0000019D                                 L21:
   151 0000019D 8B 8D FFFFFDEC                  	MOV	ECX,DWORD [-532+EBP]
   152 000001A3 8B 95 FFFFFDE8                  	MOV	EDX,DWORD [-536+EBP]
   153 000001A9 8D 41 10                        	LEA	EAX,DWORD [16+ECX]
   154 000001AC 50                              	PUSH	EAX
   155 000001AD 8D 42 08                        	LEA	EAX,DWORD [8+EDX]
   156 000001B0 50                              	PUSH	EAX
   157 000001B1 51                              	PUSH	ECX
   158 000001B2 52                              	PUSH	EDX
   159 000001B3 FF 75 08                        	PUSH	DWORD [8+EBP]
   160 000001B6 E8 [00000000]                   	CALL	_sheet_refresh
   161 000001BB 83 C4 14                        	ADD	ESP,20
   162 000001BE E9 FFFFFEF5                     	JMP	L2
   163 000001C3                                 L29:
   164 000001C3 6A 00                           	PUSH	0
   165 000001C5 8D 9D FFFFFDE4                  	LEA	EBX,DWORD [-540+EBP]
   166 000001CB 6A 20                           	PUSH	32
   167 000001CD 53                              	PUSH	EBX
   168 000001CE E8 00000119                     	CALL	_cons_putchar
   169 000001D3 53                              	PUSH	EBX
   170 000001D4 8B 85 FFFFFDE8                  	MOV	EAX,DWORD [-536+EBP]
   171 000001DA BA 00000008                     	MOV	EDX,8
   172 000001DF 89 D1                           	MOV	ECX,EDX
   173 000001E1 99                              	CDQ
   174 000001E2 F7 F9                           	IDIV	ECX
   175 000001E4 C6 84 05 FFFFFDC2 00            	MOV	BYTE [-574+EBP+EAX*1],0
   176 000001EC E8 0000019E                     	CALL	_cons_newline
   177 000001F1 8D 85 FFFFFDC4                  	LEA	EAX,DWORD [-572+EBP]
   178 000001F7 FF 75 0C                        	PUSH	DWORD [12+EBP]
   179 000001FA FF B5 FFFFFDBC                  	PUSH	DWORD [-580+EBP]
   180 00000200 53                              	PUSH	EBX
   181 00000201 50                              	PUSH	EAX
   182 00000202 E8 000002A4                     	CALL	_cons_runcmd
   183 00000207 83 C4 20                        	ADD	ESP,32
   184 0000020A 6A 01                           	PUSH	1
   185 0000020C 6A 3E                           	PUSH	62
   186 0000020E 53                              	PUSH	EBX
   187 0000020F E9 FFFFFF4A                     	JMP	L22
   188 00000214                                 L28:
   189 00000214 83 BD FFFFFDE8 10               	CMP	DWORD [-536+EBP],16
   190 0000021B 0F 8E FFFFFF45                  	JLE	L14
   191 00000221 6A 00                           	PUSH	0
   192 00000223 8D 85 FFFFFDE4                  	LEA	EAX,DWORD [-540+EBP]
   193 00000229 6A 20                           	PUSH	32
   194 0000022B 50                              	PUSH	EAX
   195 0000022C E8 000000BB                     	CALL	_cons_putchar
   196 00000231 83 AD FFFFFDE8 08               	SUB	DWORD [-536+EBP],8
   197 00000238 E9 FFFFFF26                     	JMP	L23
   198 0000023D                                 L27:
   199 0000023D 8B 8D FFFFFDEC                  	MOV	ECX,DWORD [-532+EBP]
   200 00000243 8B 95 FFFFFDE8                  	MOV	EDX,DWORD [-536+EBP]
   201 00000249 8D 41 0F                        	LEA	EAX,DWORD [15+ECX]
   202 0000024C 50                              	PUSH	EAX
   203 0000024D 8D 42 07                        	LEA	EAX,DWORD [7+EDX]
   204 00000250 50                              	PUSH	EAX
   205 00000251 51                              	PUSH	ECX
   206 00000252 8B 4D 08                        	MOV	ECX,DWORD [8+EBP]
   207 00000255 52                              	PUSH	EDX
   208 00000256 6A 00                           	PUSH	0
   209 00000258 FF 71 04                        	PUSH	DWORD [4+ECX]
   210 0000025B FF 31                           	PUSH	DWORD [ECX]
   211 0000025D E8 [00000000]                   	CALL	_boxfill8
   212 00000262 83 C4 1C                        	ADD	ESP,28
   213 00000265 C7 85 FFFFFDF0 FFFFFFFF         	MOV	DWORD [-528+EBP],-1
   214 0000026F E9 FFFFFE8A                     	JMP	L13
   215 00000274                                 L26:
   216 00000274 C7 85 FFFFFDF0 00000007         	MOV	DWORD [-528+EBP],7
   217 0000027E E9 FFFFFE72                     	JMP	L12
   218 00000283                                 L25:
   219 00000283 85 F6                           	TEST	ESI,ESI
   220 00000285 74 2E                           	JE	L8
   221 00000287 6A 00                           	PUSH	0
   222 00000289 53                              	PUSH	EBX
   223 0000028A 57                              	PUSH	EDI
   224 0000028B E8 [00000000]                   	CALL	_timer_init
   225 00000290 83 C4 0C                        	ADD	ESP,12
   226 00000293 83 BD FFFFFDF0 00               	CMP	DWORD [-528+EBP],0
   227 0000029A 78 0A                           	JS	L10
   228 0000029C C7 85 FFFFFDF0 00000007         	MOV	DWORD [-528+EBP],7
   229 000002A6                                 L10:
   230 000002A6 6A 32                           	PUSH	50
   231 000002A8 57                              	PUSH	EDI
   232 000002A9 E8 [00000000]                   	CALL	_timer_settime
   233 000002AE 58                              	POP	EAX
   234 000002AF 5A                              	POP	EDX
   235 000002B0 E9 FFFFFE37                     	JMP	L7
   236 000002B5                                 L8:
   237 000002B5 6A 01                           	PUSH	1
   238 000002B7 53                              	PUSH	EBX
   239 000002B8 57                              	PUSH	EDI
   240 000002B9 E8 [00000000]                   	CALL	_timer_init
   241 000002BE 83 C4 0C                        	ADD	ESP,12
   242 000002C1 83 BD FFFFFDF0 00               	CMP	DWORD [-528+EBP],0
   243 000002C8 78 DC                           	JS	L10
   244 000002CA C7 85 FFFFFDF0 00000000         	MOV	DWORD [-528+EBP],0
   245 000002D4 EB D0                           	JMP	L10
   246 000002D6                                 L24:
   247 000002D6 FF B5 FFFFFDC0                  	PUSH	DWORD [-576+EBP]
   248 000002DC E8 [00000000]                   	CALL	_task_sleep
   249 000002E1 E8 [00000000]                   	CALL	_io_sti
   250 000002E6 5B                              	POP	EBX
   251 000002E7 E9 FFFFFDCC                     	JMP	L2
   252                                          [SECTION .data]
   253 00000000                                 LC0:
   254 00000000 20 00                           	DB	" ",0x00
   255                                          [SECTION .text]
   256 000002EC                                 	GLOBAL	_cons_putchar
   257 000002EC                                 _cons_putchar:
   258 000002EC 55                              	PUSH	EBP
   259 000002ED 89 E5                           	MOV	EBP,ESP
   260 000002EF 53                              	PUSH	EBX
   261 000002F0 50                              	PUSH	EAX
   262 000002F1 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
   263 000002F4 8A 55 10                        	MOV	DL,BYTE [16+EBP]
   264 000002F7 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   265 000002FA 88 55 F9                        	MOV	BYTE [-7+EBP],DL
   266 000002FD 88 45 FA                        	MOV	BYTE [-6+EBP],AL
   267 00000300 3C 09                           	CMP	AL,9
   268 00000302 C6 45 FB 00                     	MOV	BYTE [-5+EBP],0
   269 00000306 74 46                           	JE	L32
   270 00000308 3C 0A                           	CMP	AL,10
   271 0000030A 74 39                           	JE	L44
   272 0000030C 3C 0D                           	CMP	AL,13
   273 0000030E 74 30                           	JE	L30
   274 00000310 6A 01                           	PUSH	1
   275 00000312 8D 45 FA                        	LEA	EAX,DWORD [-6+EBP]
   276 00000315 50                              	PUSH	EAX
   277 00000316 6A 00                           	PUSH	0
   278 00000318 6A 07                           	PUSH	7
   279 0000031A FF 73 08                        	PUSH	DWORD [8+EBX]
   280 0000031D FF 73 04                        	PUSH	DWORD [4+EBX]
   281 00000320 FF 33                           	PUSH	DWORD [EBX]
   282 00000322 E8 [00000000]                   	CALL	_putfonts8_asc_sht
   283 00000327 83 C4 1C                        	ADD	ESP,28
   284 0000032A 80 7D F9 00                     	CMP	BYTE [-7+EBP],0
   285 0000032E 74 10                           	JE	L30
   286 00000330 8B 43 04                        	MOV	EAX,DWORD [4+EBX]
   287 00000333 83 C0 08                        	ADD	EAX,8
   288 00000336 89 43 04                        	MOV	DWORD [4+EBX],EAX
   289 00000339 3D 000000F8                     	CMP	EAX,248
   290 0000033E 74 05                           	JE	L44
   291 00000340                                 L30:
   292 00000340 8B 5D FC                        	MOV	EBX,DWORD [-4+EBP]
   293 00000343 C9                              	LEAVE
   294 00000344 C3                              	RET
   295 00000345                                 L44:
   296 00000345 53                              	PUSH	EBX
   297 00000346 E8 00000044                     	CALL	_cons_newline
   298 0000034B 58                              	POP	EAX
   299 0000034C EB F2                           	JMP	L30
   300 0000034E                                 L32:
   301 0000034E 6A 01                           	PUSH	1
   302 00000350 68 [00000000]                   	PUSH	LC0
   303 00000355 6A 00                           	PUSH	0
   304 00000357 6A 07                           	PUSH	7
   305 00000359 FF 73 08                        	PUSH	DWORD [8+EBX]
   306 0000035C FF 73 04                        	PUSH	DWORD [4+EBX]
   307 0000035F FF 33                           	PUSH	DWORD [EBX]
   308 00000361 E8 [00000000]                   	CALL	_putfonts8_asc_sht
   309 00000366 83 C4 1C                        	ADD	ESP,28
   310 00000369 8B 43 04                        	MOV	EAX,DWORD [4+EBX]
   311 0000036C 83 C0 08                        	ADD	EAX,8
   312 0000036F 89 43 04                        	MOV	DWORD [4+EBX],EAX
   313 00000372 3D 000000F8                     	CMP	EAX,248
   314 00000377 74 0D                           	JE	L45
   315 00000379                                 L35:
   316 00000379 8B 43 04                        	MOV	EAX,DWORD [4+EBX]
   317 0000037C 83 E8 08                        	SUB	EAX,8
   318 0000037F 83 E0 1F                        	AND	EAX,31
   319 00000382 75 CA                           	JNE	L32
   320 00000384 EB BA                           	JMP	L30
   321 00000386                                 L45:
   322 00000386 53                              	PUSH	EBX
   323 00000387 E8 00000003                     	CALL	_cons_newline
   324 0000038C 58                              	POP	EAX
   325 0000038D EB EA                           	JMP	L35
   326 0000038F                                 	GLOBAL	_cons_newline
   327 0000038F                                 _cons_newline:
   328 0000038F 55                              	PUSH	EBP
   329 00000390 89 E5                           	MOV	EBP,ESP
   330 00000392 57                              	PUSH	EDI
   331 00000393 56                              	PUSH	ESI
   332 00000394 53                              	PUSH	EBX
   333 00000395 50                              	PUSH	EAX
   334 00000396 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
   335 00000399 8B 55 08                        	MOV	EDX,DWORD [8+EBP]
   336 0000039C 8B 00                           	MOV	EAX,DWORD [EAX]
   337 0000039E 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   338 000003A1 8B 42 08                        	MOV	EAX,DWORD [8+EDX]
   339 000003A4 3D 0000008B                     	CMP	EAX,139
   340 000003A9 7F 18                           	JG	L47
   341 000003AB 83 C0 10                        	ADD	EAX,16
   342 000003AE 89 42 08                        	MOV	DWORD [8+EDX],EAX
   343 000003B1                                 L48:
   344 000003B1 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
   345 000003B4 C7 40 04 00000008               	MOV	DWORD [4+EAX],8
   346 000003BB 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   347 000003BE 5B                              	POP	EBX
   348 000003BF 5E                              	POP	ESI
   349 000003C0 5F                              	POP	EDI
   350 000003C1 5D                              	POP	EBP
   351 000003C2 C3                              	RET
   352 000003C3                                 L47:
   353 000003C3 BF 0000001C                     	MOV	EDI,28
   354 000003C8                                 L58:
   355 000003C8 BE 00000008                     	MOV	ESI,8
   356 000003CD                                 L57:
   357 000003CD 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   358 000003D0 89 FA                           	MOV	EDX,EDI
   359 000003D2 8B 48 04                        	MOV	ECX,DWORD [4+EAX]
   360 000003D5 8B 18                           	MOV	EBX,DWORD [EAX]
   361 000003D7 8D 47 10                        	LEA	EAX,DWORD [16+EDI]
   362 000003DA 0F AF C1                        	IMUL	EAX,ECX
   363 000003DD 0F AF D1                        	IMUL	EDX,ECX
   364 000003E0 8D 04 30                        	LEA	EAX,DWORD [EAX+ESI*1]
   365 000003E3 8D 14 32                        	LEA	EDX,DWORD [EDX+ESI*1]
   366 000003E6 46                              	INC	ESI
   367 000003E7 8A 04 18                        	MOV	AL,BYTE [EAX+EBX*1]
   368 000003EA 81 FE 000000F7                  	CMP	ESI,247
   369 000003F0 88 04 1A                        	MOV	BYTE [EDX+EBX*1],AL
   370 000003F3 7E D8                           	JLE	L57
   371 000003F5 47                              	INC	EDI
   372 000003F6 81 FF 0000008B                  	CMP	EDI,139
   373 000003FC 7E CA                           	JLE	L58
   374 000003FE BF 0000008C                     	MOV	EDI,140
   375 00000403                                 L68:
   376 00000403 BE 00000008                     	MOV	ESI,8
   377 00000408                                 L67:
   378 00000408 8B 55 F0                        	MOV	EDX,DWORD [-16+EBP]
   379 0000040B 89 F8                           	MOV	EAX,EDI
   380 0000040D 89 D1                           	MOV	ECX,EDX
   381 0000040F 0F AF 42 04                     	IMUL	EAX,DWORD [4+EDX]
   382 00000413 8B 12                           	MOV	EDX,DWORD [EDX]
   383 00000415 8D 04 30                        	LEA	EAX,DWORD [EAX+ESI*1]
   384 00000418 46                              	INC	ESI
   385 00000419 81 FE 000000F7                  	CMP	ESI,247
   386 0000041F C6 04 10 00                     	MOV	BYTE [EAX+EDX*1],0
   387 00000423 7E E3                           	JLE	L67
   388 00000425 47                              	INC	EDI
   389 00000426 81 FF 0000009B                  	CMP	EDI,155
   390 0000042C 7E D5                           	JLE	L68
   391 0000042E 68 0000009C                     	PUSH	156
   392 00000433 68 000000F8                     	PUSH	248
   393 00000438 6A 1C                           	PUSH	28
   394 0000043A 6A 08                           	PUSH	8
   395 0000043C 51                              	PUSH	ECX
   396 0000043D E8 [00000000]                   	CALL	_sheet_refresh
   397 00000442 83 C4 14                        	ADD	ESP,20
   398 00000445 E9 FFFFFF67                     	JMP	L48
   399 0000044A                                 	GLOBAL	_cons_putstr0
   400 0000044A                                 _cons_putstr0:
   401 0000044A 55                              	PUSH	EBP
   402 0000044B 89 E5                           	MOV	EBP,ESP
   403 0000044D 56                              	PUSH	ESI
   404 0000044E 53                              	PUSH	EBX
   405 0000044F 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   406 00000452 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
   407 00000455 80 3B 00                        	CMP	BYTE [EBX],0
   408 00000458 75 07                           	JNE	L82
   409 0000045A                                 L84:
   410 0000045A 8D 65 F8                        	LEA	ESP,DWORD [-8+EBP]
   411 0000045D 5B                              	POP	EBX
   412 0000045E 5E                              	POP	ESI
   413 0000045F 5D                              	POP	EBP
   414 00000460 C3                              	RET
   415 00000461                                 L82:
   416 00000461 6A 01                           	PUSH	1
   417 00000463 0F BE 03                        	MOVSX	EAX,BYTE [EBX]
   418 00000466 50                              	PUSH	EAX
   419 00000467 43                              	INC	EBX
   420 00000468 56                              	PUSH	ESI
   421 00000469 E8 FFFFFE7E                     	CALL	_cons_putchar
   422 0000046E 83 C4 0C                        	ADD	ESP,12
   423 00000471 80 3B 00                        	CMP	BYTE [EBX],0
   424 00000474 75 EB                           	JNE	L82
   425 00000476 EB E2                           	JMP	L84
   426 00000478                                 	GLOBAL	_cons_putstr1
   427 00000478                                 _cons_putstr1:
   428 00000478 55                              	PUSH	EBP
   429 00000479 89 E5                           	MOV	EBP,ESP
   430 0000047B 57                              	PUSH	EDI
   431 0000047C 56                              	PUSH	ESI
   432 0000047D 53                              	PUSH	EBX
   433 0000047E 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   434 00000481 31 DB                           	XOR	EBX,EBX
   435 00000483 8B 7D 0C                        	MOV	EDI,DWORD [12+EBP]
   436 00000486 39 F3                           	CMP	EBX,ESI
   437 00000488 7C 08                           	JL	L90
   438 0000048A                                 L92:
   439 0000048A 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   440 0000048D 5B                              	POP	EBX
   441 0000048E 5E                              	POP	ESI
   442 0000048F 5F                              	POP	EDI
   443 00000490 5D                              	POP	EBP
   444 00000491 C3                              	RET
   445 00000492                                 L90:
   446 00000492 6A 01                           	PUSH	1
   447 00000494 0F BE 04 3B                     	MOVSX	EAX,BYTE [EBX+EDI*1]
   448 00000498 50                              	PUSH	EAX
   449 00000499 43                              	INC	EBX
   450 0000049A FF 75 08                        	PUSH	DWORD [8+EBP]
   451 0000049D E8 FFFFFE4A                     	CALL	_cons_putchar
   452 000004A2 83 C4 0C                        	ADD	ESP,12
   453 000004A5 39 F3                           	CMP	EBX,ESI
   454 000004A7 7C E9                           	JL	L90
   455 000004A9 EB DF                           	JMP	L92
   456                                          [SECTION .data]
   457 00000002                                 LC1:
   458 00000002 6D 65 6D 00                     	DB	"mem",0x00
   459 00000006                                 LC2:
   460 00000006 63 6C 73 00                     	DB	"cls",0x00
   461 0000000A                                 LC3:
   462 0000000A 64 69 72 00                     	DB	"dir",0x00
   463 0000000E                                 LC4:
   464 0000000E 74 79 70 65 20 00               	DB	"type ",0x00
   465 00000014                                 LC5:
   466 00000014 42 61 64 20 63 6F 6D 6D 61 6E   	DB	"Bad command.",0x0A,0x0A,0x00
       0000001E 64 2E 0A 0A 00 
   467                                          [SECTION .text]
   468 000004AB                                 	GLOBAL	_cons_runcmd
   469 000004AB                                 _cons_runcmd:
   470 000004AB 55                              	PUSH	EBP
   471 000004AC 89 E5                           	MOV	EBP,ESP
   472 000004AE 57                              	PUSH	EDI
   473 000004AF 56                              	PUSH	ESI
   474 000004B0 BF [00000002]                   	MOV	EDI,LC1
   475 000004B5 53                              	PUSH	EBX
   476 000004B6 83 EC 0C                        	SUB	ESP,12
   477 000004B9 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
   478 000004BC 8B 4D 10                        	MOV	ECX,DWORD [16+EBP]
   479 000004BF 89 45 E8                        	MOV	DWORD [-24+EBP],EAX
   480 000004C2 89 4D F0                        	MOV	DWORD [-16+EBP],ECX
   481 000004C5 8B 45 14                        	MOV	EAX,DWORD [20+EBP]
   482 000004C8 8B 75 E8                        	MOV	ESI,DWORD [-24+EBP]
   483 000004CB 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   484 000004CE 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   485 000004D1 B8 00000004                     	MOV	EAX,4
   486 000004D6 FC                              	CLD
   487 000004D7 89 C1                           	MOV	ECX,EAX
   488 000004D9 F3                              	REPE
   489 000004DA A6                              	CMPSB
   490 000004DB 0F 84 000000AD                  	JE	L104
   491 000004E1 B8 00000004                     	MOV	EAX,4
   492 000004E6 8B 75 E8                        	MOV	ESI,DWORD [-24+EBP]
   493 000004E9 FC                              	CLD
   494 000004EA BF [00000006]                   	MOV	EDI,LC2
   495 000004EF 89 C1                           	MOV	ECX,EAX
   496 000004F1 F3                              	REPE
   497 000004F2 A6                              	CMPSB
   498 000004F3 0F 84 00000089                  	JE	L105
   499 000004F9 B8 00000004                     	MOV	EAX,4
   500 000004FE 8B 75 E8                        	MOV	ESI,DWORD [-24+EBP]
   501 00000501 FC                              	CLD
   502 00000502 BF [0000000A]                   	MOV	EDI,LC3
   503 00000507 89 C1                           	MOV	ECX,EAX
   504 00000509 F3                              	REPE
   505 0000050A A6                              	CMPSB
   506 0000050B 74 66                           	JE	L106
   507 0000050D B8 00000005                     	MOV	EAX,5
   508 00000512 8B 75 E8                        	MOV	ESI,DWORD [-24+EBP]
   509 00000515 FC                              	CLD
   510 00000516 BF [0000000E]                   	MOV	EDI,LC4
   511 0000051B 89 C1                           	MOV	ECX,EAX
   512 0000051D F3                              	REPE
   513 0000051E A6                              	CMPSB
   514 0000051F 74 37                           	JE	L107
   515 00000521 8B 45 E8                        	MOV	EAX,DWORD [-24+EBP]
   516 00000524 80 38 00                        	CMP	BYTE [EAX],0
   517 00000527 75 08                           	JNE	L108
   518 00000529                                 L93:
   519 00000529 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   520 0000052C 5B                              	POP	EBX
   521 0000052D 5E                              	POP	ESI
   522 0000052E 5F                              	POP	EDI
   523 0000052F 5D                              	POP	EBP
   524 00000530 C3                              	RET
   525 00000531                                 L108:
   526 00000531 50                              	PUSH	EAX
   527 00000532 FF 75 F0                        	PUSH	DWORD [-16+EBP]
   528 00000535 53                              	PUSH	EBX
   529 00000536 E8 0000021E                     	CALL	_cmd_app
   530 0000053B 83 C4 0C                        	ADD	ESP,12
   531 0000053E 85 C0                           	TEST	EAX,EAX
   532 00000540 75 E7                           	JNE	L93
   533 00000542 C7 45 0C [00000014]             	MOV	DWORD [12+EBP],LC5
   534 00000549 89 5D 08                        	MOV	DWORD [8+EBP],EBX
   535 0000054C 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   536 0000054F 5B                              	POP	EBX
   537 00000550 5E                              	POP	ESI
   538 00000551 5F                              	POP	EDI
   539 00000552 5D                              	POP	EBP
   540 00000553 E9 FFFFFEF2                     	JMP	_cons_putstr0
   541 00000558                                 L107:
   542 00000558 8B 45 E8                        	MOV	EAX,DWORD [-24+EBP]
   543 0000055B 8B 4D F0                        	MOV	ECX,DWORD [-16+EBP]
   544 0000055E 89 45 10                        	MOV	DWORD [16+EBP],EAX
   545 00000561 89 4D 0C                        	MOV	DWORD [12+EBP],ECX
   546 00000564 89 5D 08                        	MOV	DWORD [8+EBP],EBX
   547 00000567 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   548 0000056A 5B                              	POP	EBX
   549 0000056B 5E                              	POP	ESI
   550 0000056C 5F                              	POP	EDI
   551 0000056D 5D                              	POP	EBP
   552 0000056E E9 00000156                     	JMP	_cmd_type
   553 00000573                                 L106:
   554 00000573 89 5D 08                        	MOV	DWORD [8+EBP],EBX
   555 00000576 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   556 00000579 5B                              	POP	EBX
   557 0000057A 5E                              	POP	ESI
   558 0000057B 5F                              	POP	EDI
   559 0000057C 5D                              	POP	EBP
   560 0000057D E9 000000B1                     	JMP	_cmd_dir
   561 00000582                                 L105:
   562 00000582 89 5D 08                        	MOV	DWORD [8+EBP],EBX
   563 00000585 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   564 00000588 5B                              	POP	EBX
   565 00000589 5E                              	POP	ESI
   566 0000058A 5F                              	POP	EDI
   567 0000058B 5D                              	POP	EBP
   568 0000058C EB 4C                           	JMP	_cmd_cls
   569 0000058E                                 L104:
   570 0000058E 8B 45 EC                        	MOV	EAX,DWORD [-20+EBP]
   571 00000591 89 5D 08                        	MOV	DWORD [8+EBP],EBX
   572 00000594 89 45 0C                        	MOV	DWORD [12+EBP],EAX
   573 00000597 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   574 0000059A 5B                              	POP	EBX
   575 0000059B 5E                              	POP	ESI
   576 0000059C 5F                              	POP	EDI
   577 0000059D 5D                              	POP	EBP
   578 0000059E EB 00                           	JMP	_cmd_mem
   579                                          [SECTION .data]
   580 00000023                                 LC6:
   581 00000023 74 6F 74 61 6C 20 20 20 25 64   	DB	"total   %dMB",0x0A,"free %dKB",0x0A,0x0A,0x00
       0000002D 4D 42 0A 66 72 65 65 20 25 64 
       00000037 4B 42 0A 0A 00 
   582                                          [SECTION .text]
   583 000005A0                                 	GLOBAL	_cmd_mem
   584 000005A0                                 _cmd_mem:
   585 000005A0 55                              	PUSH	EBP
   586 000005A1 89 E5                           	MOV	EBP,ESP
   587 000005A3 53                              	PUSH	EBX
   588 000005A4 83 EC 40                        	SUB	ESP,64
   589 000005A7 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   590 000005AA C1 EB 14                        	SHR	EBX,20
   591 000005AD 68 003C0000                     	PUSH	3932160
   592 000005B2 E8 [00000000]                   	CALL	_memman_total
   593 000005B7 C1 E8 0A                        	SHR	EAX,10
   594 000005BA 89 04 24                        	MOV	DWORD [ESP],EAX
   595 000005BD 53                              	PUSH	EBX
   596 000005BE 68 [00000023]                   	PUSH	LC6
   597 000005C3 8D 5D BC                        	LEA	EBX,DWORD [-68+EBP]
   598 000005C6 53                              	PUSH	EBX
   599 000005C7 E8 [00000000]                   	CALL	_sprintf
   600 000005CC 53                              	PUSH	EBX
   601 000005CD FF 75 08                        	PUSH	DWORD [8+EBP]
   602 000005D0 E8 FFFFFE75                     	CALL	_cons_putstr0
   603 000005D5 8B 5D FC                        	MOV	EBX,DWORD [-4+EBP]
   604 000005D8 C9                              	LEAVE
   605 000005D9 C3                              	RET
   606 000005DA                                 	GLOBAL	_cmd_cls
   607 000005DA                                 _cmd_cls:
   608 000005DA 55                              	PUSH	EBP
   609 000005DB 89 E5                           	MOV	EBP,ESP
   610 000005DD 57                              	PUSH	EDI
   611 000005DE 56                              	PUSH	ESI
   612 000005DF BE 0000001C                     	MOV	ESI,28
   613 000005E4 8B 7D 08                        	MOV	EDI,DWORD [8+EBP]
   614 000005E7 53                              	PUSH	EBX
   615 000005E8 8B 1F                           	MOV	EBX,DWORD [EDI]
   616 000005EA                                 L120:
   617 000005EA B9 00000008                     	MOV	ECX,8
   618 000005EF                                 L119:
   619 000005EF 89 F0                           	MOV	EAX,ESI
   620 000005F1 8B 13                           	MOV	EDX,DWORD [EBX]
   621 000005F3 0F AF 43 04                     	IMUL	EAX,DWORD [4+EBX]
   622 000005F7 8D 04 08                        	LEA	EAX,DWORD [EAX+ECX*1]
   623 000005FA 41                              	INC	ECX
   624 000005FB 81 F9 000000F7                  	CMP	ECX,247
   625 00000601 C6 04 10 00                     	MOV	BYTE [EAX+EDX*1],0
   626 00000605 7E E8                           	JLE	L119
   627 00000607 46                              	INC	ESI
   628 00000608 81 FE 0000009B                  	CMP	ESI,155
   629 0000060E 7E DA                           	JLE	L120
   630 00000610 68 0000009C                     	PUSH	156
   631 00000615 68 000000F8                     	PUSH	248
   632 0000061A 6A 1C                           	PUSH	28
   633 0000061C 6A 08                           	PUSH	8
   634 0000061E 53                              	PUSH	EBX
   635 0000061F E8 [00000000]                   	CALL	_sheet_refresh
   636 00000624 C7 47 08 0000001C               	MOV	DWORD [8+EDI],28
   637 0000062B 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   638 0000062E 5B                              	POP	EBX
   639 0000062F 5E                              	POP	ESI
   640 00000630 5F                              	POP	EDI
   641 00000631 5D                              	POP	EBP
   642 00000632 C3                              	RET
   643                                          [SECTION .data]
   644 0000003C                                 LC7:
   645 0000003C 66 69 6C 65 6E 61 6D 65 2E 65   	DB	"filename.ext   %7d",0x0A,0x00
       00000046 78 74 20 20 20 25 37 64 0A 00 
   646                                          [SECTION .text]
   647 00000633                                 	GLOBAL	_cmd_dir
   648 00000633                                 _cmd_dir:
   649 00000633 55                              	PUSH	EBP
   650 00000634 89 E5                           	MOV	EBP,ESP
   651 00000636 57                              	PUSH	EDI
   652 00000637 56                              	PUSH	ESI
   653 00000638 31 F6                           	XOR	ESI,ESI
   654 0000063A 53                              	PUSH	EBX
   655 0000063B 31 DB                           	XOR	EBX,EBX
   656 0000063D 83 EC 20                        	SUB	ESP,32
   657 00000640 8B 7D 08                        	MOV	EDI,DWORD [8+EBP]
   658 00000643                                 L138:
   659 00000643 8A 83 00102600                  	MOV	AL,BYTE [1058304+EBX]
   660 00000649 84 C0                           	TEST	AL,AL
   661 0000064B 74 19                           	JE	L127
   662 0000064D 3C E5                           	CMP	AL,-27
   663 0000064F 74 09                           	JE	L128
   664 00000651 F6 83 0010260B 18               	TEST	BYTE [1058315+EBX],24
   665 00000658 74 1A                           	JE	L142
   666 0000065A                                 L128:
   667 0000065A 46                              	INC	ESI
   668 0000065B 83 C3 20                        	ADD	EBX,32
   669 0000065E 81 FE 000000DF                  	CMP	ESI,223
   670 00000664 7E DD                           	JLE	L138
   671 00000666                                 L127:
   672 00000666 57                              	PUSH	EDI
   673 00000667 E8 FFFFFD23                     	CALL	_cons_newline
   674 0000066C 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   675 0000066F 5B                              	POP	EBX
   676 00000670 5E                              	POP	ESI
   677 00000671 5F                              	POP	EDI
   678 00000672 5D                              	POP	EBP
   679 00000673 C3                              	RET
   680 00000674                                 L142:
   681 00000674 FF B3 0010261C                  	PUSH	DWORD [1058332+EBX]
   682 0000067A 68 [0000003C]                   	PUSH	LC7
   683 0000067F 8D 45 D4                        	LEA	EAX,DWORD [-44+EBP]
   684 00000682 50                              	PUSH	EAX
   685 00000683 E8 [00000000]                   	CALL	_sprintf
   686 00000688 8D 93 00102600                  	LEA	EDX,DWORD [1058304+EBX]
   687 0000068E 31 C9                           	XOR	ECX,ECX
   688 00000690 83 C4 0C                        	ADD	ESP,12
   689 00000693                                 L137:
   690 00000693 8A 02                           	MOV	AL,BYTE [EDX]
   691 00000695 42                              	INC	EDX
   692 00000696 88 44 0D D4                     	MOV	BYTE [-44+EBP+ECX*1],AL
   693 0000069A 41                              	INC	ECX
   694 0000069B 83 F9 07                        	CMP	ECX,7
   695 0000069E 7E F3                           	JLE	L137
   696 000006A0 8A 83 00102608                  	MOV	AL,BYTE [1058312+EBX]
   697 000006A6 88 45 DD                        	MOV	BYTE [-35+EBP],AL
   698 000006A9 8A 83 00102609                  	MOV	AL,BYTE [1058313+EBX]
   699 000006AF 88 45 DE                        	MOV	BYTE [-34+EBP],AL
   700 000006B2 8A 83 0010260A                  	MOV	AL,BYTE [1058314+EBX]
   701 000006B8 88 45 DF                        	MOV	BYTE [-33+EBP],AL
   702 000006BB 8D 45 D4                        	LEA	EAX,DWORD [-44+EBP]
   703 000006BE 50                              	PUSH	EAX
   704 000006BF 57                              	PUSH	EDI
   705 000006C0 E8 FFFFFD85                     	CALL	_cons_putstr0
   706 000006C5 58                              	POP	EAX
   707 000006C6 5A                              	POP	EDX
   708 000006C7 EB 91                           	JMP	L128
   709                                          [SECTION .data]
   710 00000050                                 LC8:
   711 00000050 46 69 6C 65 20 6E 6F 74 20 66   	DB	"File not found.",0x0A,0x00
       0000005A 6F 75 6E 64 2E 0A 00 
   712                                          [SECTION .text]
   713 000006C9                                 	GLOBAL	_cmd_type
   714 000006C9                                 _cmd_type:
   715 000006C9 55                              	PUSH	EBP
   716 000006CA 89 E5                           	MOV	EBP,ESP
   717 000006CC 57                              	PUSH	EDI
   718 000006CD 56                              	PUSH	ESI
   719 000006CE 53                              	PUSH	EBX
   720 000006CF 56                              	PUSH	ESI
   721 000006D0 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
   722 000006D3 8B 7D 08                        	MOV	EDI,DWORD [8+EBP]
   723 000006D6 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   724 000006D9 68 000000E0                     	PUSH	224
   725 000006DE 68 00102600                     	PUSH	1058304
   726 000006E3 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   727 000006E6 83 C0 05                        	ADD	EAX,5
   728 000006E9 50                              	PUSH	EAX
   729 000006EA E8 [00000000]                   	CALL	_file_search
   730 000006EF 83 C4 0C                        	ADD	ESP,12
   731 000006F2 89 C6                           	MOV	ESI,EAX
   732 000006F4 85 C0                           	TEST	EAX,EAX
   733 000006F6 74 52                           	JE	L144
   734 000006F8 FF 70 1C                        	PUSH	DWORD [28+EAX]
   735 000006FB 68 003C0000                     	PUSH	3932160
   736 00000700 E8 [00000000]                   	CALL	_memman_alloc_4k
   737 00000705 68 00103E00                     	PUSH	1064448
   738 0000070A FF 75 F0                        	PUSH	DWORD [-16+EBP]
   739 0000070D 50                              	PUSH	EAX
   740 0000070E 89 C3                           	MOV	EBX,EAX
   741 00000710 FF 76 1C                        	PUSH	DWORD [28+ESI]
   742 00000713 0F B7 46 1A                     	MOVZX	EAX,WORD [26+ESI]
   743 00000717 50                              	PUSH	EAX
   744 00000718 E8 [00000000]                   	CALL	_file_loadfile
   745 0000071D FF 76 1C                        	PUSH	DWORD [28+ESI]
   746 00000720 53                              	PUSH	EBX
   747 00000721 57                              	PUSH	EDI
   748 00000722 E8 FFFFFD51                     	CALL	_cons_putstr1
   749 00000727 83 C4 28                        	ADD	ESP,40
   750 0000072A FF 76 1C                        	PUSH	DWORD [28+ESI]
   751 0000072D 53                              	PUSH	EBX
   752 0000072E 68 003C0000                     	PUSH	3932160
   753 00000733 E8 [00000000]                   	CALL	_memman_free_4k
   754 00000738 83 C4 0C                        	ADD	ESP,12
   755 0000073B                                 L145:
   756 0000073B 89 7D 08                        	MOV	DWORD [8+EBP],EDI
   757 0000073E 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   758 00000741 5B                              	POP	EBX
   759 00000742 5E                              	POP	ESI
   760 00000743 5F                              	POP	EDI
   761 00000744 5D                              	POP	EBP
   762 00000745 E9 FFFFFC45                     	JMP	_cons_newline
   763 0000074A                                 L144:
   764 0000074A 68 [00000050]                   	PUSH	LC8
   765 0000074F 57                              	PUSH	EDI
   766 00000750 E8 FFFFFCF5                     	CALL	_cons_putstr0
   767 00000755 59                              	POP	ECX
   768 00000756 5B                              	POP	EBX
   769 00000757 EB E2                           	JMP	L145
   770                                          [SECTION .data]
   771 00000061                                 LC9:
   772 00000061 48 61 72 69 00                  	DB	"Hari",0x00
   773 00000066                                 LC10:
   774 00000066 2E 68 72 62 20 66 69 6C 65 20   	DB	".hrb file format error.",0x0A,0x00
       00000070 66 6F 72 6D 61 74 20 65 72 72 
       0000007A 6F 72 2E 0A 00 
   775                                          [SECTION .text]
   776 00000759                                 	GLOBAL	_cmd_app
   777 00000759                                 _cmd_app:
   778 00000759 55                              	PUSH	EBP
   779 0000075A 89 E5                           	MOV	EBP,ESP
   780 0000075C 57                              	PUSH	EDI
   781 0000075D 56                              	PUSH	ESI
   782 0000075E 53                              	PUSH	EBX
   783 0000075F 31 DB                           	XOR	EBX,EBX
   784 00000761 83 EC 38                        	SUB	ESP,56
   785 00000764 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   786 00000767 E8 [00000000]                   	CALL	_task_now
   787 0000076C 89 45 CC                        	MOV	DWORD [-52+EBP],EAX
   788 0000076F                                 L152:
   789 0000076F 8A 04 33                        	MOV	AL,BYTE [EBX+ESI*1]
   790 00000772 3C 20                           	CMP	AL,32
   791 00000774 7E 0A                           	JLE	L148
   792 00000776 88 44 1D D4                     	MOV	BYTE [-44+EBP+EBX*1],AL
   793 0000077A 43                              	INC	EBX
   794 0000077B 83 FB 0C                        	CMP	EBX,12
   795 0000077E 7E EF                           	JLE	L152
   796 00000780                                 L148:
   797 00000780 68 000000E0                     	PUSH	224
   798 00000785 8D 75 D4                        	LEA	ESI,DWORD [-44+EBP]
   799 00000788 68 00102600                     	PUSH	1058304
   800 0000078D 56                              	PUSH	ESI
   801 0000078E C6 44 1D D4 00                  	MOV	BYTE [-44+EBP+EBX*1],0
   802 00000793 E8 [00000000]                   	CALL	_file_search
   803 00000798 83 C4 0C                        	ADD	ESP,12
   804 0000079B 85 C0                           	TEST	EAX,EAX
   805 0000079D 89 45 D0                        	MOV	DWORD [-48+EBP],EAX
   806 000007A0 0F 84 0000012E                  	JE	L166
   807 000007A6                                 L165:
   808 000007A6 8B 45 D0                        	MOV	EAX,DWORD [-48+EBP]
   809 000007A9 FF 70 1C                        	PUSH	DWORD [28+EAX]
   810 000007AC 68 003C0000                     	PUSH	3932160
   811 000007B1 E8 [00000000]                   	CALL	_memman_alloc_4k
   812 000007B6 8B 55 D0                        	MOV	EDX,DWORD [-48+EBP]
   813 000007B9 68 00103E00                     	PUSH	1064448
   814 000007BE FF 75 0C                        	PUSH	DWORD [12+EBP]
   815 000007C1 50                              	PUSH	EAX
   816 000007C2 89 45 BC                        	MOV	DWORD [-68+EBP],EAX
   817 000007C5 FF 72 1C                        	PUSH	DWORD [28+EDX]
   818 000007C8 0F B7 42 1A                     	MOVZX	EAX,WORD [26+EDX]
   819 000007CC 50                              	PUSH	EAX
   820 000007CD E8 [00000000]                   	CALL	_file_loadfile
   821 000007D2 8B 7D D0                        	MOV	EDI,DWORD [-48+EBP]
   822 000007D5 83 C4 1C                        	ADD	ESP,28
   823 000007D8 83 7F 1C 23                     	CMP	DWORD [28+EDI],35
   824 000007DC 76 1F                           	JBE	L155
   825 000007DE 8B 75 BC                        	MOV	ESI,DWORD [-68+EBP]
   826 000007E1 B8 [00000061]                   	MOV	EAX,LC9
   827 000007E6 FC                              	CLD
   828 000007E7 83 C6 04                        	ADD	ESI,4
   829 000007EA B9 00000004                     	MOV	ECX,4
   830 000007EF 89 C7                           	MOV	EDI,EAX
   831 000007F1 F3                              	REPE
   832 000007F2 A6                              	CMPSB
   833 000007F3 75 08                           	JNE	L155
   834 000007F5 8B 45 BC                        	MOV	EAX,DWORD [-68+EBP]
   835 000007F8 80 38 00                        	CMP	BYTE [EAX],0
   836 000007FB 74 37                           	JE	L167
   837 000007FD                                 L155:
   838 000007FD 68 [00000066]                   	PUSH	LC10
   839 00000802 FF 75 08                        	PUSH	DWORD [8+EBP]
   840 00000805 E8 FFFFFC40                     	CALL	_cons_putstr0
   841 0000080A 5F                              	POP	EDI
   842 0000080B 58                              	POP	EAX
   843 0000080C                                 L161:
   844 0000080C 8B 7D D0                        	MOV	EDI,DWORD [-48+EBP]
   845 0000080F FF 77 1C                        	PUSH	DWORD [28+EDI]
   846 00000812 FF 75 BC                        	PUSH	DWORD [-68+EBP]
   847 00000815 68 003C0000                     	PUSH	3932160
   848 0000081A E8 [00000000]                   	CALL	_memman_free_4k
   849 0000081F FF 75 08                        	PUSH	DWORD [8+EBP]
   850 00000822 E8 FFFFFB68                     	CALL	_cons_newline
   851 00000827 B8 00000001                     	MOV	EAX,1
   852 0000082C                                 L146:
   853 0000082C 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   854 0000082F 5B                              	POP	EBX
   855 00000830 5E                              	POP	ESI
   856 00000831 5F                              	POP	EDI
   857 00000832 5D                              	POP	EBP
   858 00000833 C3                              	RET
   859 00000834                                 L167:
   860 00000834 8B 10                           	MOV	EDX,DWORD [EAX]
   861 00000836 8B 78 0C                        	MOV	EDI,DWORD [12+EAX]
   862 00000839 8B 58 10                        	MOV	EBX,DWORD [16+EAX]
   863 0000083C 89 55 C8                        	MOV	DWORD [-56+EBP],EDX
   864 0000083F 8B 40 14                        	MOV	EAX,DWORD [20+EAX]
   865 00000842 89 7D C4                        	MOV	DWORD [-60+EBP],EDI
   866 00000845 52                              	PUSH	EDX
   867 00000846 89 45 C0                        	MOV	DWORD [-64+EBP],EAX
   868 00000849 68 003C0000                     	PUSH	3932160
   869 0000084E E8 [00000000]                   	CALL	_memman_alloc_4k
   870 00000853 8B 55 D0                        	MOV	EDX,DWORD [-48+EBP]
   871 00000856 A3 00000FE8                     	MOV	DWORD [4072],EAX
   872 0000085B 89 C6                           	MOV	ESI,EAX
   873 0000085D 68 000040FA                     	PUSH	16634
   874 00000862 FF 75 BC                        	PUSH	DWORD [-68+EBP]
   875 00000865 8B 42 1C                        	MOV	EAX,DWORD [28+EDX]
   876 00000868 48                              	DEC	EAX
   877 00000869 50                              	PUSH	EAX
   878 0000086A 68 00271F58                     	PUSH	2563928
   879 0000086F E8 [00000000]                   	CALL	_set_segmdesc
   880 00000874 8B 45 C8                        	MOV	EAX,DWORD [-56+EBP]
   881 00000877 68 000040F2                     	PUSH	16626
   882 0000087C 48                              	DEC	EAX
   883 0000087D 56                              	PUSH	ESI
   884 0000087E 50                              	PUSH	EAX
   885 0000087F 68 00271F60                     	PUSH	2563936
   886 00000884 E8 [00000000]                   	CALL	_set_segmdesc
   887 00000889 83 C4 28                        	ADD	ESP,40
   888 0000088C 85 DB                           	TEST	EBX,EBX
   889 0000088E 7E 13                           	JLE	L164
   890 00000890 8B 55 C0                        	MOV	EDX,DWORD [-64+EBP]
   891 00000893 89 F9                           	MOV	ECX,EDI
   892 00000895 03 55 BC                        	ADD	EDX,DWORD [-68+EBP]
   893 00000898 01 F1                           	ADD	ECX,ESI
   894 0000089A                                 L160:
   895 0000089A 8A 02                           	MOV	AL,BYTE [EDX]
   896 0000089C 42                              	INC	EDX
   897 0000089D 88 01                           	MOV	BYTE [ECX],AL
   898 0000089F 41                              	INC	ECX
   899 000008A0 4B                              	DEC	EBX
   900 000008A1 75 F7                           	JNE	L160
   901 000008A3                                 L164:
   902 000008A3 8B 45 CC                        	MOV	EAX,DWORD [-52+EBP]
   903 000008A6 83 C0 30                        	ADD	EAX,48
   904 000008A9 50                              	PUSH	EAX
   905 000008AA 68 00001F60                     	PUSH	8032
   906 000008AF FF 75 C4                        	PUSH	DWORD [-60+EBP]
   907 000008B2 68 00001F58                     	PUSH	8024
   908 000008B7 6A 1B                           	PUSH	27
   909 000008B9 E8 [00000000]                   	CALL	_start_app
   910 000008BE FF 75 C8                        	PUSH	DWORD [-56+EBP]
   911 000008C1 56                              	PUSH	ESI
   912 000008C2 68 003C0000                     	PUSH	3932160
   913 000008C7 E8 [00000000]                   	CALL	_memman_free_4k
   914 000008CC 83 C4 20                        	ADD	ESP,32
   915 000008CF E9 FFFFFF38                     	JMP	L161
   916 000008D4                                 L166:
   917 000008D4 80 7C 1D D3 2E                  	CMP	BYTE [-45+EBP+EBX*1],46
   918 000008D9 74 2F                           	JE	L153
   919 000008DB 68 000000E0                     	PUSH	224
   920 000008E0 68 00102600                     	PUSH	1058304
   921 000008E5 56                              	PUSH	ESI
   922 000008E6 C6 44 1D D4 2E                  	MOV	BYTE [-44+EBP+EBX*1],46
   923 000008EB C6 44 1D D5 48                  	MOV	BYTE [-43+EBP+EBX*1],72
   924 000008F0 C6 44 1D D6 52                  	MOV	BYTE [-42+EBP+EBX*1],82
   925 000008F5 C6 44 1D D7 42                  	MOV	BYTE [-41+EBP+EBX*1],66
   926 000008FA C6 44 1D D8 00                  	MOV	BYTE [-40+EBP+EBX*1],0
   927 000008FF E8 [00000000]                   	CALL	_file_search
   928 00000904 83 C4 0C                        	ADD	ESP,12
   929 00000907 89 45 D0                        	MOV	DWORD [-48+EBP],EAX
   930 0000090A                                 L153:
   931 0000090A 83 7D D0 00                     	CMP	DWORD [-48+EBP],0
   932 0000090E 0F 85 FFFFFE92                  	JNE	L165
   933 00000914 31 C0                           	XOR	EAX,EAX
   934 00000916 E9 FFFFFF11                     	JMP	L146
   935 0000091B                                 	GLOBAL	_hrb_api
   936 0000091B                                 _hrb_api:
   937 0000091B 55                              	PUSH	EBP
   938 0000091C 89 E5                           	MOV	EBP,ESP
   939 0000091E 57                              	PUSH	EDI
   940 0000091F 56                              	PUSH	ESI
   941 00000920 53                              	PUSH	EBX
   942 00000921 8B 75 18                        	MOV	ESI,DWORD [24+EBP]
   943 00000924 8B 5D 1C                        	MOV	EBX,DWORD [28+EBP]
   944 00000927 8B 3D 00000FE8                  	MOV	EDI,DWORD [4072]
   945 0000092D E8 [00000000]                   	CALL	_task_now
   946 00000932 83 FB 01                        	CMP	EBX,1
   947 00000935 8B 15 00000FEC                  	MOV	EDX,DWORD [4076]
   948 0000093B 8B 0D 00000FE4                  	MOV	ECX,DWORD [4068]
   949 00000941 0F 84 0000008E                  	JE	L179
   950 00000947 83 FB 02                        	CMP	EBX,2
   951 0000094A 74 7B                           	JE	L180
   952 0000094C 83 FB 03                        	CMP	EBX,3
   953 0000094F 74 64                           	JE	L181
   954 00000951 83 FB 04                        	CMP	EBX,4
   955 00000954 74 5A                           	JE	L182
   956 00000956 83 FB 05                        	CMP	EBX,5
   957 00000959 74 0A                           	JE	L183
   958 0000095B                                 L170:
   959 0000095B 31 C0                           	XOR	EAX,EAX
   960 0000095D                                 L168:
   961 0000095D 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   962 00000960 5B                              	POP	EBX
   963 00000961 5E                              	POP	ESI
   964 00000962 5F                              	POP	EDI
   965 00000963 5D                              	POP	EBP
   966 00000964 C3                              	RET
   967 00000965                                 L183:
   968 00000965 51                              	PUSH	ECX
   969 00000966 01 FE                           	ADD	ESI,EDI
   970 00000968 E8 [00000000]                   	CALL	_sheet_alloc
   971 0000096D FF 75 24                        	PUSH	DWORD [36+EBP]
   972 00000970 FF 75 08                        	PUSH	DWORD [8+EBP]
   973 00000973 FF 75 0C                        	PUSH	DWORD [12+EBP]
   974 00000976 56                              	PUSH	ESI
   975 00000977 89 C3                           	MOV	EBX,EAX
   976 00000979 50                              	PUSH	EAX
   977 0000097A E8 [00000000]                   	CALL	_sheet_setbuf
   978 0000097F 8B 45 20                        	MOV	EAX,DWORD [32+EBP]
   979 00000982 6A 00                           	PUSH	0
   980 00000984 01 F8                           	ADD	EAX,EDI
   981 00000986 50                              	PUSH	EAX
   982 00000987 FF 75 08                        	PUSH	DWORD [8+EBP]
   983 0000098A FF 75 0C                        	PUSH	DWORD [12+EBP]
   984 0000098D 56                              	PUSH	ESI
   985 0000098E E8 [00000000]                   	CALL	_make_window8
   986 00000993 83 C4 2C                        	ADD	ESP,44
   987 00000996 6A 32                           	PUSH	50
   988 00000998 6A 64                           	PUSH	100
   989 0000099A 53                              	PUSH	EBX
   990 0000099B E8 [00000000]                   	CALL	_sheet_slide
   991 000009A0 6A 03                           	PUSH	3
   992 000009A2 53                              	PUSH	EBX
   993 000009A3 E8 [00000000]                   	CALL	_sheet_updown
   994 000009A8 83 C4 14                        	ADD	ESP,20
   995 000009AB 89 5D 44                        	MOV	DWORD [68+EBP],EBX
   996 000009AE EB AB                           	JMP	L170
   997 000009B0                                 L182:
   998 000009B0 83 C0 30                        	ADD	EAX,48
   999 000009B3 EB A8                           	JMP	L168
  1000 000009B5                                 L181:
  1001 000009B5 FF 75 20                        	PUSH	DWORD [32+EBP]
  1002 000009B8 8D 04 37                        	LEA	EAX,DWORD [EDI+ESI*1]
  1003 000009BB 50                              	PUSH	EAX
  1004 000009BC 52                              	PUSH	EDX
  1005 000009BD E8 FFFFFAB6                     	CALL	_cons_putstr1
  1006 000009C2                                 L178:
  1007 000009C2 83 C4 0C                        	ADD	ESP,12
  1008 000009C5 EB 94                           	JMP	L170
  1009 000009C7                                 L180:
  1010 000009C7 8D 04 37                        	LEA	EAX,DWORD [EDI+ESI*1]
  1011 000009CA 50                              	PUSH	EAX
  1012 000009CB 52                              	PUSH	EDX
  1013 000009CC E8 FFFFFA79                     	CALL	_cons_putstr0
  1014 000009D1 58                              	POP	EAX
  1015 000009D2 5A                              	POP	EDX
  1016 000009D3 EB 86                           	JMP	L170
  1017 000009D5                                 L179:
  1018 000009D5 6A 01                           	PUSH	1
  1019 000009D7 0F B6 45 24                     	MOVZX	EAX,BYTE [36+EBP]
  1020 000009DB 50                              	PUSH	EAX
  1021 000009DC 52                              	PUSH	EDX
  1022 000009DD E8 FFFFF90A                     	CALL	_cons_putchar
  1023 000009E2 EB DE                           	JMP	L178
  1024                                          [SECTION .data]
  1025 0000007F                                 LC11:
  1026 0000007F 0A 49 4E 54 20 30 43 20 3A 0A   	DB	0x0A,"INT 0C :",0x0A," Stack Exception.",0x0A,0x00
       00000089 20 53 74 61 63 6B 20 45 78 63 
       00000093 65 70 74 69 6F 6E 2E 0A 00 
  1027 0000009C                                 LC12:
  1028 0000009C 45 49 50 20 3D 20 25 30 38 58   	DB	"EIP = %08X",0x0A,0x00
       000000A6 0A 00 
  1029                                          [SECTION .text]
  1030 000009E4                                 	GLOBAL	_inthandler0c
  1031 000009E4                                 _inthandler0c:
  1032 000009E4 55                              	PUSH	EBP
  1033 000009E5 89 E5                           	MOV	EBP,ESP
  1034 000009E7 57                              	PUSH	EDI
  1035 000009E8 56                              	PUSH	ESI
  1036 000009E9 53                              	PUSH	EBX
  1037 000009EA 8D 5D D4                        	LEA	EBX,DWORD [-44+EBP]
  1038 000009ED 83 EC 20                        	SUB	ESP,32
  1039 000009F0 8B 3D 00000FEC                  	MOV	EDI,DWORD [4076]
  1040 000009F6 E8 [00000000]                   	CALL	_task_now
  1041 000009FB 68 [0000007F]                   	PUSH	LC11
  1042 00000A00 89 C6                           	MOV	ESI,EAX
  1043 00000A02 57                              	PUSH	EDI
  1044 00000A03 83 C6 30                        	ADD	ESI,48
  1045 00000A06 E8 FFFFFA3F                     	CALL	_cons_putstr0
  1046 00000A0B 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
  1047 00000A0E FF 70 2C                        	PUSH	DWORD [44+EAX]
  1048 00000A11 68 [0000009C]                   	PUSH	LC12
  1049 00000A16 53                              	PUSH	EBX
  1050 00000A17 E8 [00000000]                   	CALL	_sprintf
  1051 00000A1C 53                              	PUSH	EBX
  1052 00000A1D 57                              	PUSH	EDI
  1053 00000A1E E8 FFFFFA27                     	CALL	_cons_putstr0
  1054 00000A23 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
  1055 00000A26 5B                              	POP	EBX
  1056 00000A27 89 F0                           	MOV	EAX,ESI
  1057 00000A29 5E                              	POP	ESI
  1058 00000A2A 5F                              	POP	EDI
  1059 00000A2B 5D                              	POP	EBP
  1060 00000A2C C3                              	RET
  1061                                          [SECTION .data]
  1062 000000A8                                 LC13:
  1063 000000A8 0A 49 4E 54 20 30 44 20 3A 0A   	DB	0x0A,"INT 0D :",0x0A," General Protected Exception.",0x0A,0x00
       000000B2 20 47 65 6E 65 72 61 6C 20 50 
       000000BC 72 6F 74 65 63 74 65 64 20 45 
       000000C6 78 63 65 70 74 69 6F 6E 2E 0A 
       000000D0 00 
  1064                                          [SECTION .text]
  1065 00000A2D                                 	GLOBAL	_inthandler0d
  1066 00000A2D                                 _inthandler0d:
  1067 00000A2D 55                              	PUSH	EBP
  1068 00000A2E 89 E5                           	MOV	EBP,ESP
  1069 00000A30 57                              	PUSH	EDI
  1070 00000A31 56                              	PUSH	ESI
  1071 00000A32 53                              	PUSH	EBX
  1072 00000A33 8D 5D D4                        	LEA	EBX,DWORD [-44+EBP]
  1073 00000A36 83 EC 20                        	SUB	ESP,32
  1074 00000A39 8B 3D 00000FEC                  	MOV	EDI,DWORD [4076]
  1075 00000A3F E8 [00000000]                   	CALL	_task_now
  1076 00000A44 68 [000000A8]                   	PUSH	LC13
  1077 00000A49 89 C6                           	MOV	ESI,EAX
  1078 00000A4B 57                              	PUSH	EDI
  1079 00000A4C 83 C6 30                        	ADD	ESI,48
  1080 00000A4F E8 FFFFF9F6                     	CALL	_cons_putstr0
  1081 00000A54 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
  1082 00000A57 FF 70 2C                        	PUSH	DWORD [44+EAX]
  1083 00000A5A 68 [0000009C]                   	PUSH	LC12
  1084 00000A5F 53                              	PUSH	EBX
  1085 00000A60 E8 [00000000]                   	CALL	_sprintf
  1086 00000A65 53                              	PUSH	EBX
  1087 00000A66 57                              	PUSH	EDI
  1088 00000A67 E8 FFFFF9DE                     	CALL	_cons_putstr0
  1089 00000A6C 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
  1090 00000A6F 5B                              	POP	EBX
  1091 00000A70 89 F0                           	MOV	EAX,ESI
  1092 00000A72 5E                              	POP	ESI
  1093 00000A73 5F                              	POP	EDI
  1094 00000A74 5D                              	POP	EBP
  1095 00000A75 C3                              	RET
