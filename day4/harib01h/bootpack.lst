     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_io_hlt
     7 00000000                                 	EXTERN	_io_load_eflags
     8 00000000                                 	EXTERN	_io_cli
     9 00000000                                 	EXTERN	_io_out8
    10 00000000                                 	EXTERN	_io_store_eflags
    11 00000000                                 [FILE "bootpack.c"]
    12                                          [SECTION .text]
    13 00000000                                 	GLOBAL	_HariMain
    14 00000000                                 _HariMain:
    15 00000000 55                              	PUSH	EBP
    16 00000001 89 E5                           	MOV	EBP,ESP
    17 00000003 E8 0000024F                     	CALL	_init_palette
    18 00000008 68 000000AB                     	PUSH	171
    19 0000000D 68 0000013F                     	PUSH	319
    20 00000012 6A 00                           	PUSH	0
    21 00000014 6A 00                           	PUSH	0
    22 00000016 6A 0E                           	PUSH	14
    23 00000018 68 00000140                     	PUSH	320
    24 0000001D 68 000A0000                     	PUSH	655360
    25 00000022 E8 000002CB                     	CALL	_boxfill8
    26 00000027 68 000000AC                     	PUSH	172
    27 0000002C 68 0000013F                     	PUSH	319
    28 00000031 68 000000AC                     	PUSH	172
    29 00000036 6A 00                           	PUSH	0
    30 00000038 6A 08                           	PUSH	8
    31 0000003A 68 00000140                     	PUSH	320
    32 0000003F 68 000A0000                     	PUSH	655360
    33 00000044 E8 000002A9                     	CALL	_boxfill8
    34 00000049 83 C4 38                        	ADD	ESP,56
    35 0000004C 68 0000008C                     	PUSH	140
    36 00000051 6A 6E                           	PUSH	110
    37 00000053 6A 3C                           	PUSH	60
    38 00000055 6A 64                           	PUSH	100
    39 00000057 6A 08                           	PUSH	8
    40 00000059 68 00000140                     	PUSH	320
    41 0000005E 68 000A0000                     	PUSH	655360
    42 00000063 E8 0000028A                     	CALL	_boxfill8
    43 00000068 6A 69                           	PUSH	105
    44 0000006A 68 0000008C                     	PUSH	140
    45 0000006F 6A 5F                           	PUSH	95
    46 00000071 6A 6E                           	PUSH	110
    47 00000073 6A 03                           	PUSH	3
    48 00000075 68 00000140                     	PUSH	320
    49 0000007A 68 000A0000                     	PUSH	655360
    50 0000007F E8 0000026E                     	CALL	_boxfill8
    51 00000084 83 C4 38                        	ADD	ESP,56
    52 00000087 68 0000008C                     	PUSH	140
    53 0000008C 68 00000096                     	PUSH	150
    54 00000091 6A 3C                           	PUSH	60
    55 00000093 68 0000008C                     	PUSH	140
    56 00000098 6A 08                           	PUSH	8
    57 0000009A 68 00000140                     	PUSH	320
    58 0000009F 68 000A0000                     	PUSH	655360
    59 000000A4 E8 00000249                     	CALL	_boxfill8
    60 000000A9 68 000000AD                     	PUSH	173
    61 000000AE 68 0000013F                     	PUSH	319
    62 000000B3 68 000000AD                     	PUSH	173
    63 000000B8 6A 00                           	PUSH	0
    64 000000BA 6A 07                           	PUSH	7
    65 000000BC 68 00000140                     	PUSH	320
    66 000000C1 68 000A0000                     	PUSH	655360
    67 000000C6 E8 00000227                     	CALL	_boxfill8
    68 000000CB 83 C4 38                        	ADD	ESP,56
    69 000000CE 68 000000C7                     	PUSH	199
    70 000000D3 68 0000013F                     	PUSH	319
    71 000000D8 68 000000AE                     	PUSH	174
    72 000000DD 6A 00                           	PUSH	0
    73 000000DF 6A 08                           	PUSH	8
    74 000000E1 68 00000140                     	PUSH	320
    75 000000E6 68 000A0000                     	PUSH	655360
    76 000000EB E8 00000202                     	CALL	_boxfill8
    77 000000F0 68 000000B0                     	PUSH	176
    78 000000F5 6A 3B                           	PUSH	59
    79 000000F7 68 000000B0                     	PUSH	176
    80 000000FC 6A 03                           	PUSH	3
    81 000000FE 6A 07                           	PUSH	7
    82 00000100 68 00000140                     	PUSH	320
    83 00000105 68 000A0000                     	PUSH	655360
    84 0000010A E8 000001E3                     	CALL	_boxfill8
    85 0000010F 83 C4 38                        	ADD	ESP,56
    86 00000112 68 000000C4                     	PUSH	196
    87 00000117 6A 02                           	PUSH	2
    88 00000119 68 000000B0                     	PUSH	176
    89 0000011E 6A 02                           	PUSH	2
    90 00000120 6A 07                           	PUSH	7
    91 00000122 68 00000140                     	PUSH	320
    92 00000127 68 000A0000                     	PUSH	655360
    93 0000012C E8 000001C1                     	CALL	_boxfill8
    94 00000131 68 000000C4                     	PUSH	196
    95 00000136 6A 3B                           	PUSH	59
    96 00000138 68 000000C4                     	PUSH	196
    97 0000013D 6A 03                           	PUSH	3
    98 0000013F 6A 0F                           	PUSH	15
    99 00000141 68 00000140                     	PUSH	320
   100 00000146 68 000A0000                     	PUSH	655360
   101 0000014B E8 000001A2                     	CALL	_boxfill8
   102 00000150 83 C4 38                        	ADD	ESP,56
   103 00000153 68 000000C3                     	PUSH	195
   104 00000158 6A 3B                           	PUSH	59
   105 0000015A 68 000000B1                     	PUSH	177
   106 0000015F 6A 3B                           	PUSH	59
   107 00000161 6A 0F                           	PUSH	15
   108 00000163 68 00000140                     	PUSH	320
   109 00000168 68 000A0000                     	PUSH	655360
   110 0000016D E8 00000180                     	CALL	_boxfill8
   111 00000172 68 000000C5                     	PUSH	197
   112 00000177 6A 3B                           	PUSH	59
   113 00000179 68 000000C5                     	PUSH	197
   114 0000017E 6A 02                           	PUSH	2
   115 00000180 6A 00                           	PUSH	0
   116 00000182 68 00000140                     	PUSH	320
   117 00000187 68 000A0000                     	PUSH	655360
   118 0000018C E8 00000161                     	CALL	_boxfill8
   119 00000191 83 C4 38                        	ADD	ESP,56
   120 00000194 68 000000C5                     	PUSH	197
   121 00000199 6A 3C                           	PUSH	60
   122 0000019B 68 000000B0                     	PUSH	176
   123 000001A0 6A 3C                           	PUSH	60
   124 000001A2 6A 00                           	PUSH	0
   125 000001A4 68 00000140                     	PUSH	320
   126 000001A9 68 000A0000                     	PUSH	655360
   127 000001AE E8 0000013F                     	CALL	_boxfill8
   128 000001B3 68 000000B0                     	PUSH	176
   129 000001B8 68 0000013C                     	PUSH	316
   130 000001BD 68 000000B0                     	PUSH	176
   131 000001C2 68 00000111                     	PUSH	273
   132 000001C7 6A 0F                           	PUSH	15
   133 000001C9 68 00000140                     	PUSH	320
   134 000001CE 68 000A0000                     	PUSH	655360
   135 000001D3 E8 0000011A                     	CALL	_boxfill8
   136 000001D8 83 C4 38                        	ADD	ESP,56
   137 000001DB 68 000000C4                     	PUSH	196
   138 000001E0 68 00000111                     	PUSH	273
   139 000001E5 68 000000B1                     	PUSH	177
   140 000001EA 68 00000111                     	PUSH	273
   141 000001EF 6A 0F                           	PUSH	15
   142 000001F1 68 00000140                     	PUSH	320
   143 000001F6 68 000A0000                     	PUSH	655360
   144 000001FB E8 000000F2                     	CALL	_boxfill8
   145 00000200 68 000000C5                     	PUSH	197
   146 00000205 68 0000013C                     	PUSH	316
   147 0000020A 68 000000C5                     	PUSH	197
   148 0000020F 68 00000111                     	PUSH	273
   149 00000214 6A 07                           	PUSH	7
   150 00000216 68 00000140                     	PUSH	320
   151 0000021B 68 000A0000                     	PUSH	655360
   152 00000220 E8 000000CD                     	CALL	_boxfill8
   153 00000225 83 C4 38                        	ADD	ESP,56
   154 00000228 68 000000C5                     	PUSH	197
   155 0000022D 68 0000013D                     	PUSH	317
   156 00000232 68 000000B0                     	PUSH	176
   157 00000237 68 0000013D                     	PUSH	317
   158 0000023C 6A 07                           	PUSH	7
   159 0000023E 68 00000140                     	PUSH	320
   160 00000243 68 000A0000                     	PUSH	655360
   161 00000248 E8 000000A5                     	CALL	_boxfill8
   162 0000024D 83 C4 1C                        	ADD	ESP,28
   163 00000250                                 L2:
   164 00000250 E8 [00000000]                   	CALL	_io_hlt
   165 00000255 EB F9                           	JMP	L2
   166                                          [SECTION .data]
   167 00000000                                 _table_rgb.0:
   168 00000000 00                              	DB	0
   169 00000001 00                              	DB	0
   170 00000002 00                              	DB	0
   171 00000003 FF                              	DB	-1
   172 00000004 00                              	DB	0
   173 00000005 00                              	DB	0
   174 00000006 00                              	DB	0
   175 00000007 FF                              	DB	-1
   176 00000008 00                              	DB	0
   177 00000009 FF                              	DB	-1
   178 0000000A FF                              	DB	-1
   179 0000000B 00                              	DB	0
   180 0000000C 00                              	DB	0
   181 0000000D 00                              	DB	0
   182 0000000E FF                              	DB	-1
   183 0000000F FF                              	DB	-1
   184 00000010 00                              	DB	0
   185 00000011 FF                              	DB	-1
   186 00000012 00                              	DB	0
   187 00000013 FF                              	DB	-1
   188 00000014 FF                              	DB	-1
   189 00000015 FF                              	DB	-1
   190 00000016 FF                              	DB	-1
   191 00000017 FF                              	DB	-1
   192 00000018 C6                              	DB	-58
   193 00000019 C6                              	DB	-58
   194 0000001A C6                              	DB	-58
   195 0000001B 84                              	DB	-124
   196 0000001C 00                              	DB	0
   197 0000001D 00                              	DB	0
   198 0000001E 00                              	DB	0
   199 0000001F 84                              	DB	-124
   200 00000020 00                              	DB	0
   201 00000021 84                              	DB	-124
   202 00000022 84                              	DB	-124
   203 00000023 00                              	DB	0
   204 00000024 00                              	DB	0
   205 00000025 00                              	DB	0
   206 00000026 84                              	DB	-124
   207 00000027 84                              	DB	-124
   208 00000028 00                              	DB	0
   209 00000029 84                              	DB	-124
   210 0000002A 00                              	DB	0
   211 0000002B 84                              	DB	-124
   212 0000002C 84                              	DB	-124
   213 0000002D 84                              	DB	-124
   214 0000002E 84                              	DB	-124
   215 0000002F 84                              	DB	-124
   216                                          [SECTION .text]
   217 00000257                                 	GLOBAL	_init_palette
   218 00000257                                 _init_palette:
   219 00000257 55                              	PUSH	EBP
   220 00000258 89 E5                           	MOV	EBP,ESP
   221 0000025A 68 [00000000]                   	PUSH	_table_rgb.0
   222 0000025F 6A 0F                           	PUSH	15
   223 00000261 6A 00                           	PUSH	0
   224 00000263 E8 00000002                     	CALL	_set_palette
   225 00000268 C9                              	LEAVE
   226 00000269 C3                              	RET
   227 0000026A                                 	GLOBAL	_set_palette
   228 0000026A                                 _set_palette:
   229 0000026A 55                              	PUSH	EBP
   230 0000026B 89 E5                           	MOV	EBP,ESP
   231 0000026D 57                              	PUSH	EDI
   232 0000026E 56                              	PUSH	ESI
   233 0000026F 53                              	PUSH	EBX
   234 00000270 51                              	PUSH	ECX
   235 00000271 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   236 00000274 8B 7D 0C                        	MOV	EDI,DWORD [12+EBP]
   237 00000277 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   238 0000027A E8 [00000000]                   	CALL	_io_load_eflags
   239 0000027F 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   240 00000282 E8 [00000000]                   	CALL	_io_cli
   241 00000287 53                              	PUSH	EBX
   242 00000288 68 000003C8                     	PUSH	968
   243 0000028D E8 [00000000]                   	CALL	_io_out8
   244 00000292 39 FB                           	CMP	EBX,EDI
   245 00000294 58                              	POP	EAX
   246 00000295 5A                              	POP	EDX
   247 00000296 7E 12                           	JLE	L11
   248 00000298                                 L13:
   249 00000298 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   250 0000029B 89 45 08                        	MOV	DWORD [8+EBP],EAX
   251 0000029E 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   252 000002A1 5B                              	POP	EBX
   253 000002A2 5E                              	POP	ESI
   254 000002A3 5F                              	POP	EDI
   255 000002A4 5D                              	POP	EBP
   256 000002A5 E9 [00000000]                   	JMP	_io_store_eflags
   257 000002AA                                 L11:
   258 000002AA 8A 06                           	MOV	AL,BYTE [ESI]
   259 000002AC 43                              	INC	EBX
   260 000002AD C0 E8 02                        	SHR	AL,2
   261 000002B0 0F B6 C0                        	MOVZX	EAX,AL
   262 000002B3 50                              	PUSH	EAX
   263 000002B4 68 000003C9                     	PUSH	969
   264 000002B9 E8 [00000000]                   	CALL	_io_out8
   265 000002BE 8A 46 01                        	MOV	AL,BYTE [1+ESI]
   266 000002C1 C0 E8 02                        	SHR	AL,2
   267 000002C4 0F B6 C0                        	MOVZX	EAX,AL
   268 000002C7 50                              	PUSH	EAX
   269 000002C8 68 000003C9                     	PUSH	969
   270 000002CD E8 [00000000]                   	CALL	_io_out8
   271 000002D2 8A 46 02                        	MOV	AL,BYTE [2+ESI]
   272 000002D5 C0 E8 02                        	SHR	AL,2
   273 000002D8 83 C6 03                        	ADD	ESI,3
   274 000002DB 0F B6 C0                        	MOVZX	EAX,AL
   275 000002DE 50                              	PUSH	EAX
   276 000002DF 68 000003C9                     	PUSH	969
   277 000002E4 E8 [00000000]                   	CALL	_io_out8
   278 000002E9 83 C4 18                        	ADD	ESP,24
   279 000002EC 39 FB                           	CMP	EBX,EDI
   280 000002EE 7E BA                           	JLE	L11
   281 000002F0 EB A6                           	JMP	L13
   282 000002F2                                 	GLOBAL	_boxfill8
   283 000002F2                                 _boxfill8:
   284 000002F2 55                              	PUSH	EBP
   285 000002F3 89 E5                           	MOV	EBP,ESP
   286 000002F5 57                              	PUSH	EDI
   287 000002F6 56                              	PUSH	ESI
   288 000002F7 53                              	PUSH	EBX
   289 000002F8 57                              	PUSH	EDI
   290 000002F9 57                              	PUSH	EDI
   291 000002FA 8A 45 10                        	MOV	AL,BYTE [16+EBP]
   292 000002FD 8B 4D 18                        	MOV	ECX,DWORD [24+EBP]
   293 00000300 8B 7D 1C                        	MOV	EDI,DWORD [28+EBP]
   294 00000303 88 45 F3                        	MOV	BYTE [-13+EBP],AL
   295 00000306 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   296 00000309 7F 31                           	JG	L26
   297 0000030B 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   298 0000030E 0F AF D9                        	IMUL	EBX,ECX
   299 00000311                                 L24:
   300 00000311 8B 55 14                        	MOV	EDX,DWORD [20+EBP]
   301 00000314 39 FA                           	CMP	EDX,EDI
   302 00000316 7F 1B                           	JG	L28
   303 00000318 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
   304 0000031B 01 DE                           	ADD	ESI,EBX
   305 0000031D 01 D6                           	ADD	ESI,EDX
   306 0000031F 89 75 EC                        	MOV	DWORD [-20+EBP],ESI
   307 00000322                                 L23:
   308 00000322 8B 75 EC                        	MOV	ESI,DWORD [-20+EBP]
   309 00000325 8A 45 F3                        	MOV	AL,BYTE [-13+EBP]
   310 00000328 42                              	INC	EDX
   311 00000329 88 06                           	MOV	BYTE [ESI],AL
   312 0000032B 46                              	INC	ESI
   313 0000032C 89 75 EC                        	MOV	DWORD [-20+EBP],ESI
   314 0000032F 39 FA                           	CMP	EDX,EDI
   315 00000331 7E EF                           	JLE	L23
   316 00000333                                 L28:
   317 00000333 41                              	INC	ECX
   318 00000334 03 5D 0C                        	ADD	EBX,DWORD [12+EBP]
   319 00000337 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   320 0000033A 7E D5                           	JLE	L24
   321 0000033C                                 L26:
   322 0000033C 5B                              	POP	EBX
   323 0000033D 5E                              	POP	ESI
   324 0000033E 5B                              	POP	EBX
   325 0000033F 5E                              	POP	ESI
   326 00000340 5F                              	POP	EDI
   327 00000341 5D                              	POP	EBP
   328 00000342 C3                              	RET
