     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_task_now
     7 00000000                                 	EXTERN	_memman_alloc_4k
     8 00000000                                 	EXTERN	_fifo32_init
     9 00000000                                 	EXTERN	_timer_alloc
    10 00000000                                 	EXTERN	_timer_init
    11 00000000                                 	EXTERN	_timer_settime
    12 00000000                                 	EXTERN	_file_readfat
    13 00000000                                 	EXTERN	_io_cli
    14 00000000                                 	EXTERN	_fifo32_status
    15 00000000                                 	EXTERN	_fifo32_get
    16 00000000                                 	EXTERN	_io_sti
    17 00000000                                 	EXTERN	_boxfill8
    18 00000000                                 	EXTERN	_sheet_refresh
    19 00000000                                 	EXTERN	_task_sleep
    20 00000000                                 	EXTERN	_putfonts8_asc_sht
    21 00000000                                 	EXTERN	_memman_total
    22 00000000                                 	EXTERN	_sprintf
    23 00000000                                 	EXTERN	_file_search
    24 00000000                                 	EXTERN	_file_loadfile
    25 00000000                                 	EXTERN	_memman_free_4k
    26 00000000                                 	EXTERN	_set_segmdesc
    27 00000000                                 	EXTERN	_start_app
    28 00000000                                 	EXTERN	_sheet_free
    29 00000000                                 	EXTERN	_timer_free
    30 00000000                                 	EXTERN	_memman_free
    31 00000000                                 	EXTERN	_memman_alloc
    32 00000000                                 	EXTERN	_memman_init
    33 00000000                                 	EXTERN	_putfonts8_asc
    34 00000000                                 	EXTERN	_sheet_alloc
    35 00000000                                 	EXTERN	_sheet_setbuf
    36 00000000                                 	EXTERN	_make_window8
    37 00000000                                 	EXTERN	_sheet_slide
    38 00000000                                 	EXTERN	_sheet_updown
    39 00000000                                 [FILE "console.c"]
    40                                          [SECTION .text]
    41 00000000                                 	GLOBAL	_console_task
    42 00000000                                 _console_task:
    43 00000000 55                              	PUSH	EBP
    44 00000001 89 E5                           	MOV	EBP,ESP
    45 00000003 57                              	PUSH	EDI
    46 00000004 56                              	PUSH	ESI
    47 00000005 53                              	PUSH	EBX
    48 00000006 8D B5 FFFFFDD4                  	LEA	ESI,DWORD [-556+EBP]
    49 0000000C 81 EC 00000248                  	SUB	ESP,584
    50 00000012 E8 [00000000]                   	CALL	_task_now
    51 00000017 68 00002D00                     	PUSH	11520
    52 0000001C 89 C7                           	MOV	EDI,EAX
    53 0000001E 68 003C0000                     	PUSH	3932160
    54 00000023 8D 5F 10                        	LEA	EBX,DWORD [16+EDI]
    55 00000026 E8 [00000000]                   	CALL	_memman_alloc_4k
    56 0000002B C7 85 FFFFFDD8 00000008         	MOV	DWORD [-552+EBP],8
    57 00000035 89 85 FFFFFDB0                  	MOV	DWORD [-592+EBP],EAX
    58 0000003B 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
    59 0000003E 89 85 FFFFFDD4                  	MOV	DWORD [-556+EBP],EAX
    60 00000044 8D 85 FFFFFDF4                  	LEA	EAX,DWORD [-524+EBP]
    61 0000004A C7 85 FFFFFDDC 0000001C         	MOV	DWORD [-548+EBP],28
    62 00000054 C7 85 FFFFFDE0 FFFFFFFF         	MOV	DWORD [-544+EBP],-1
    63 0000005E 89 35 00000FEC                  	MOV	DWORD [4076],ESI
    64 00000064 57                              	PUSH	EDI
    65 00000065 50                              	PUSH	EAX
    66 00000066 68 00000080                     	PUSH	128
    67 0000006B 53                              	PUSH	EBX
    68 0000006C E8 [00000000]                   	CALL	_fifo32_init
    69 00000071 E8 [00000000]                   	CALL	_timer_alloc
    70 00000076 6A 01                           	PUSH	1
    71 00000078 53                              	PUSH	EBX
    72 00000079 50                              	PUSH	EAX
    73 0000007A 89 85 FFFFFDE4                  	MOV	DWORD [-540+EBP],EAX
    74 00000080 E8 [00000000]                   	CALL	_timer_init
    75 00000085 83 C4 24                        	ADD	ESP,36
    76 00000088 6A 32                           	PUSH	50
    77 0000008A FF B5 FFFFFDE4                  	PUSH	DWORD [-540+EBP]
    78 00000090 E8 [00000000]                   	CALL	_timer_settime
    79 00000095 68 00100200                     	PUSH	1049088
    80 0000009A FF B5 FFFFFDB0                  	PUSH	DWORD [-592+EBP]
    81 000000A0 E8 [00000000]                   	CALL	_file_readfat
    82 000000A5 6A 01                           	PUSH	1
    83 000000A7 6A 3E                           	PUSH	62
    84 000000A9 56                              	PUSH	ESI
    85 000000AA E8 0000023B                     	CALL	_cons_putchar
    86 000000AF 83 C4 1C                        	ADD	ESP,28
    87 000000B2                                 L2:
    88 000000B2 8D 5F 10                        	LEA	EBX,DWORD [16+EDI]
    89 000000B5 E8 [00000000]                   	CALL	_io_cli
    90 000000BA 53                              	PUSH	EBX
    91 000000BB E8 [00000000]                   	CALL	_fifo32_status
    92 000000C0 5E                              	POP	ESI
    93 000000C1 85 C0                           	TEST	EAX,EAX
    94 000000C3 0F 84 00000210                  	JE	L24
    95 000000C9 53                              	PUSH	EBX
    96 000000CA E8 [00000000]                   	CALL	_fifo32_get
    97 000000CF 89 C6                           	MOV	ESI,EAX
    98 000000D1 E8 [00000000]                   	CALL	_io_sti
    99 000000D6 59                              	POP	ECX
   100 000000D7 83 FE 01                        	CMP	ESI,1
   101 000000DA 0F 8E 00000197                  	JLE	L25
   102 000000E0                                 L7:
   103 000000E0 83 FE 02                        	CMP	ESI,2
   104 000000E3 0F 84 0000017F                  	JE	L26
   105 000000E9                                 L12:
   106 000000E9 83 FE 03                        	CMP	ESI,3
   107 000000EC 0F 84 0000013F                  	JE	L27
   108 000000F2                                 L13:
   109 000000F2 8D 9E FFFFFF00                  	LEA	EBX,DWORD [-256+ESI]
   110 000000F8 89 9D FFFFFDAC                  	MOV	DWORD [-596+EBP],EBX
   111 000000FE 81 FB 000000FF                  	CMP	EBX,255
   112 00000104 77 54                           	JA	L14
   113 00000106 81 FE 00000108                  	CMP	ESI,264
   114 0000010C 0F 84 000000F6                  	JE	L28
   115 00000112 81 FE 0000010A                  	CMP	ESI,266
   116 00000118 0F 84 00000099                  	JE	L29
   117 0000011E 8B 8D FFFFFDD8                  	MOV	ECX,DWORD [-552+EBP]
   118 00000124 81 F9 000000EF                  	CMP	ECX,239
   119 0000012A 7F 2E                           	JG	L14
   120 0000012C 89 C8                           	MOV	EAX,ECX
   121 0000012E BA 00000008                     	MOV	EDX,8
   122 00000133 89 D3                           	MOV	EBX,EDX
   123 00000135 6A 01                           	PUSH	1
   124 00000137 99                              	CDQ
   125 00000138 F7 FB                           	IDIV	EBX
   126 0000013A 89 C1                           	MOV	ECX,EAX
   127 0000013C 89 F0                           	MOV	EAX,ESI
   128 0000013E 88 84 0D FFFFFDB2               	MOV	BYTE [-590+EBP+ECX*1],AL
   129 00000145 8D 85 FFFFFDD4                  	LEA	EAX,DWORD [-556+EBP]
   130 0000014B FF B5 FFFFFDAC                  	PUSH	DWORD [-596+EBP]
   131 00000151 50                              	PUSH	EAX
   132 00000152                                 L22:
   133 00000152 E8 00000193                     	CALL	_cons_putchar
   134 00000157                                 L23:
   135 00000157 83 C4 0C                        	ADD	ESP,12
   136 0000015A                                 L14:
   137 0000015A 83 BD FFFFFDE0 00               	CMP	DWORD [-544+EBP],0
   138 00000161 78 2E                           	JS	L21
   139 00000163 8B 8D FFFFFDDC                  	MOV	ECX,DWORD [-548+EBP]
   140 00000169 8B 95 FFFFFDD8                  	MOV	EDX,DWORD [-552+EBP]
   141 0000016F 8D 41 0F                        	LEA	EAX,DWORD [15+ECX]
   142 00000172 50                              	PUSH	EAX
   143 00000173 8D 42 07                        	LEA	EAX,DWORD [7+EDX]
   144 00000176 50                              	PUSH	EAX
   145 00000177 51                              	PUSH	ECX
   146 00000178 8B 4D 08                        	MOV	ECX,DWORD [8+EBP]
   147 0000017B 52                              	PUSH	EDX
   148 0000017C 0F B6 85 FFFFFDE0               	MOVZX	EAX,BYTE [-544+EBP]
   149 00000183 50                              	PUSH	EAX
   150 00000184 FF 71 04                        	PUSH	DWORD [4+ECX]
   151 00000187 FF 31                           	PUSH	DWORD [ECX]
   152 00000189 E8 [00000000]                   	CALL	_boxfill8
   153 0000018E 83 C4 1C                        	ADD	ESP,28
   154 00000191                                 L21:
   155 00000191 8B 8D FFFFFDDC                  	MOV	ECX,DWORD [-548+EBP]
   156 00000197 8B 95 FFFFFDD8                  	MOV	EDX,DWORD [-552+EBP]
   157 0000019D 8D 41 10                        	LEA	EAX,DWORD [16+ECX]
   158 000001A0 50                              	PUSH	EAX
   159 000001A1 8D 42 08                        	LEA	EAX,DWORD [8+EDX]
   160 000001A4 50                              	PUSH	EAX
   161 000001A5 51                              	PUSH	ECX
   162 000001A6 52                              	PUSH	EDX
   163 000001A7 FF 75 08                        	PUSH	DWORD [8+EBP]
   164 000001AA E8 [00000000]                   	CALL	_sheet_refresh
   165 000001AF 83 C4 14                        	ADD	ESP,20
   166 000001B2 E9 FFFFFEFB                     	JMP	L2
   167 000001B7                                 L29:
   168 000001B7 6A 00                           	PUSH	0
   169 000001B9 8D 9D FFFFFDD4                  	LEA	EBX,DWORD [-556+EBP]
   170 000001BF 6A 20                           	PUSH	32
   171 000001C1 53                              	PUSH	EBX
   172 000001C2 E8 00000123                     	CALL	_cons_putchar
   173 000001C7 53                              	PUSH	EBX
   174 000001C8 8B 85 FFFFFDD8                  	MOV	EAX,DWORD [-552+EBP]
   175 000001CE BA 00000008                     	MOV	EDX,8
   176 000001D3 89 D1                           	MOV	ECX,EDX
   177 000001D5 99                              	CDQ
   178 000001D6 F7 F9                           	IDIV	ECX
   179 000001D8 C6 84 05 FFFFFDB2 00            	MOV	BYTE [-590+EBP+EAX*1],0
   180 000001E0 E8 000001A8                     	CALL	_cons_newline
   181 000001E5 8D 85 FFFFFDB4                  	LEA	EAX,DWORD [-588+EBP]
   182 000001EB FF 75 0C                        	PUSH	DWORD [12+EBP]
   183 000001EE FF B5 FFFFFDB0                  	PUSH	DWORD [-592+EBP]
   184 000001F4 53                              	PUSH	EBX
   185 000001F5 50                              	PUSH	EAX
   186 000001F6 E8 000002AE                     	CALL	_cons_runcmd
   187 000001FB 83 C4 20                        	ADD	ESP,32
   188 000001FE 6A 01                           	PUSH	1
   189 00000200 6A 3E                           	PUSH	62
   190 00000202 53                              	PUSH	EBX
   191 00000203 E9 FFFFFF4A                     	JMP	L22
   192 00000208                                 L28:
   193 00000208 83 BD FFFFFDD8 10               	CMP	DWORD [-552+EBP],16
   194 0000020F 0F 8E FFFFFF45                  	JLE	L14
   195 00000215 6A 00                           	PUSH	0
   196 00000217 8D 85 FFFFFDD4                  	LEA	EAX,DWORD [-556+EBP]
   197 0000021D 6A 20                           	PUSH	32
   198 0000021F 50                              	PUSH	EAX
   199 00000220 E8 000000C5                     	CALL	_cons_putchar
   200 00000225 83 AD FFFFFDD8 08               	SUB	DWORD [-552+EBP],8
   201 0000022C E9 FFFFFF26                     	JMP	L23
   202 00000231                                 L27:
   203 00000231 8B 8D FFFFFDDC                  	MOV	ECX,DWORD [-548+EBP]
   204 00000237 8B 95 FFFFFDD8                  	MOV	EDX,DWORD [-552+EBP]
   205 0000023D 8D 41 0F                        	LEA	EAX,DWORD [15+ECX]
   206 00000240 50                              	PUSH	EAX
   207 00000241 8D 42 07                        	LEA	EAX,DWORD [7+EDX]
   208 00000244 50                              	PUSH	EAX
   209 00000245 51                              	PUSH	ECX
   210 00000246 8B 4D 08                        	MOV	ECX,DWORD [8+EBP]
   211 00000249 52                              	PUSH	EDX
   212 0000024A 6A 00                           	PUSH	0
   213 0000024C FF 71 04                        	PUSH	DWORD [4+ECX]
   214 0000024F FF 31                           	PUSH	DWORD [ECX]
   215 00000251 E8 [00000000]                   	CALL	_boxfill8
   216 00000256 83 C4 1C                        	ADD	ESP,28
   217 00000259 C7 85 FFFFFDE0 FFFFFFFF         	MOV	DWORD [-544+EBP],-1
   218 00000263 E9 FFFFFE8A                     	JMP	L13
   219 00000268                                 L26:
   220 00000268 C7 85 FFFFFDE0 00000007         	MOV	DWORD [-544+EBP],7
   221 00000272 E9 FFFFFE72                     	JMP	L12
   222 00000277                                 L25:
   223 00000277 85 F6                           	TEST	ESI,ESI
   224 00000279 74 38                           	JE	L8
   225 0000027B 6A 00                           	PUSH	0
   226 0000027D 53                              	PUSH	EBX
   227 0000027E FF B5 FFFFFDE4                  	PUSH	DWORD [-540+EBP]
   228 00000284 E8 [00000000]                   	CALL	_timer_init
   229 00000289 83 C4 0C                        	ADD	ESP,12
   230 0000028C 83 BD FFFFFDE0 00               	CMP	DWORD [-544+EBP],0
   231 00000293 78 0A                           	JS	L10
   232 00000295 C7 85 FFFFFDE0 00000007         	MOV	DWORD [-544+EBP],7
   233 0000029F                                 L10:
   234 0000029F 6A 32                           	PUSH	50
   235 000002A1 FF B5 FFFFFDE4                  	PUSH	DWORD [-540+EBP]
   236 000002A7 E8 [00000000]                   	CALL	_timer_settime
   237 000002AC 58                              	POP	EAX
   238 000002AD 5A                              	POP	EDX
   239 000002AE E9 FFFFFE2D                     	JMP	L7
   240 000002B3                                 L8:
   241 000002B3 6A 01                           	PUSH	1
   242 000002B5 53                              	PUSH	EBX
   243 000002B6 FF B5 FFFFFDE4                  	PUSH	DWORD [-540+EBP]
   244 000002BC E8 [00000000]                   	CALL	_timer_init
   245 000002C1 83 C4 0C                        	ADD	ESP,12
   246 000002C4 83 BD FFFFFDE0 00               	CMP	DWORD [-544+EBP],0
   247 000002CB 78 D2                           	JS	L10
   248 000002CD C7 85 FFFFFDE0 00000000         	MOV	DWORD [-544+EBP],0
   249 000002D7 EB C6                           	JMP	L10
   250 000002D9                                 L24:
   251 000002D9 57                              	PUSH	EDI
   252 000002DA E8 [00000000]                   	CALL	_task_sleep
   253 000002DF E8 [00000000]                   	CALL	_io_sti
   254 000002E4 5B                              	POP	EBX
   255 000002E5 E9 FFFFFDC8                     	JMP	L2
   256                                          [SECTION .data]
   257 00000000                                 LC0:
   258 00000000 20 00                           	DB	" ",0x00
   259                                          [SECTION .text]
   260 000002EA                                 	GLOBAL	_cons_putchar
   261 000002EA                                 _cons_putchar:
   262 000002EA 55                              	PUSH	EBP
   263 000002EB 89 E5                           	MOV	EBP,ESP
   264 000002ED 53                              	PUSH	EBX
   265 000002EE 50                              	PUSH	EAX
   266 000002EF 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
   267 000002F2 8A 55 10                        	MOV	DL,BYTE [16+EBP]
   268 000002F5 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   269 000002F8 88 55 F9                        	MOV	BYTE [-7+EBP],DL
   270 000002FB 88 45 FA                        	MOV	BYTE [-6+EBP],AL
   271 000002FE 3C 09                           	CMP	AL,9
   272 00000300 C6 45 FB 00                     	MOV	BYTE [-5+EBP],0
   273 00000304 74 46                           	JE	L32
   274 00000306 3C 0A                           	CMP	AL,10
   275 00000308 74 39                           	JE	L44
   276 0000030A 3C 0D                           	CMP	AL,13
   277 0000030C 74 30                           	JE	L30
   278 0000030E 6A 01                           	PUSH	1
   279 00000310 8D 45 FA                        	LEA	EAX,DWORD [-6+EBP]
   280 00000313 50                              	PUSH	EAX
   281 00000314 6A 00                           	PUSH	0
   282 00000316 6A 07                           	PUSH	7
   283 00000318 FF 73 08                        	PUSH	DWORD [8+EBX]
   284 0000031B FF 73 04                        	PUSH	DWORD [4+EBX]
   285 0000031E FF 33                           	PUSH	DWORD [EBX]
   286 00000320 E8 [00000000]                   	CALL	_putfonts8_asc_sht
   287 00000325 83 C4 1C                        	ADD	ESP,28
   288 00000328 80 7D F9 00                     	CMP	BYTE [-7+EBP],0
   289 0000032C 74 10                           	JE	L30
   290 0000032E 8B 43 04                        	MOV	EAX,DWORD [4+EBX]
   291 00000331 83 C0 08                        	ADD	EAX,8
   292 00000334 89 43 04                        	MOV	DWORD [4+EBX],EAX
   293 00000337 3D 000000F8                     	CMP	EAX,248
   294 0000033C 74 05                           	JE	L44
   295 0000033E                                 L30:
   296 0000033E 8B 5D FC                        	MOV	EBX,DWORD [-4+EBP]
   297 00000341 C9                              	LEAVE
   298 00000342 C3                              	RET
   299 00000343                                 L44:
   300 00000343 53                              	PUSH	EBX
   301 00000344 E8 00000044                     	CALL	_cons_newline
   302 00000349 58                              	POP	EAX
   303 0000034A EB F2                           	JMP	L30
   304 0000034C                                 L32:
   305 0000034C 6A 01                           	PUSH	1
   306 0000034E 68 [00000000]                   	PUSH	LC0
   307 00000353 6A 00                           	PUSH	0
   308 00000355 6A 07                           	PUSH	7
   309 00000357 FF 73 08                        	PUSH	DWORD [8+EBX]
   310 0000035A FF 73 04                        	PUSH	DWORD [4+EBX]
   311 0000035D FF 33                           	PUSH	DWORD [EBX]
   312 0000035F E8 [00000000]                   	CALL	_putfonts8_asc_sht
   313 00000364 83 C4 1C                        	ADD	ESP,28
   314 00000367 8B 43 04                        	MOV	EAX,DWORD [4+EBX]
   315 0000036A 83 C0 08                        	ADD	EAX,8
   316 0000036D 89 43 04                        	MOV	DWORD [4+EBX],EAX
   317 00000370 3D 000000F8                     	CMP	EAX,248
   318 00000375 74 0D                           	JE	L45
   319 00000377                                 L35:
   320 00000377 8B 43 04                        	MOV	EAX,DWORD [4+EBX]
   321 0000037A 83 E8 08                        	SUB	EAX,8
   322 0000037D 83 E0 1F                        	AND	EAX,31
   323 00000380 75 CA                           	JNE	L32
   324 00000382 EB BA                           	JMP	L30
   325 00000384                                 L45:
   326 00000384 53                              	PUSH	EBX
   327 00000385 E8 00000003                     	CALL	_cons_newline
   328 0000038A 58                              	POP	EAX
   329 0000038B EB EA                           	JMP	L35
   330 0000038D                                 	GLOBAL	_cons_newline
   331 0000038D                                 _cons_newline:
   332 0000038D 55                              	PUSH	EBP
   333 0000038E 89 E5                           	MOV	EBP,ESP
   334 00000390 57                              	PUSH	EDI
   335 00000391 56                              	PUSH	ESI
   336 00000392 53                              	PUSH	EBX
   337 00000393 50                              	PUSH	EAX
   338 00000394 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
   339 00000397 8B 55 08                        	MOV	EDX,DWORD [8+EBP]
   340 0000039A 8B 00                           	MOV	EAX,DWORD [EAX]
   341 0000039C 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   342 0000039F 8B 42 08                        	MOV	EAX,DWORD [8+EDX]
   343 000003A2 3D 0000008B                     	CMP	EAX,139
   344 000003A7 7F 18                           	JG	L47
   345 000003A9 83 C0 10                        	ADD	EAX,16
   346 000003AC 89 42 08                        	MOV	DWORD [8+EDX],EAX
   347 000003AF                                 L48:
   348 000003AF 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
   349 000003B2 C7 40 04 00000008               	MOV	DWORD [4+EAX],8
   350 000003B9 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   351 000003BC 5B                              	POP	EBX
   352 000003BD 5E                              	POP	ESI
   353 000003BE 5F                              	POP	EDI
   354 000003BF 5D                              	POP	EBP
   355 000003C0 C3                              	RET
   356 000003C1                                 L47:
   357 000003C1 BF 0000001C                     	MOV	EDI,28
   358 000003C6                                 L58:
   359 000003C6 BE 00000008                     	MOV	ESI,8
   360 000003CB                                 L57:
   361 000003CB 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   362 000003CE 89 FA                           	MOV	EDX,EDI
   363 000003D0 8B 48 04                        	MOV	ECX,DWORD [4+EAX]
   364 000003D3 8B 18                           	MOV	EBX,DWORD [EAX]
   365 000003D5 8D 47 10                        	LEA	EAX,DWORD [16+EDI]
   366 000003D8 0F AF C1                        	IMUL	EAX,ECX
   367 000003DB 0F AF D1                        	IMUL	EDX,ECX
   368 000003DE 8D 04 30                        	LEA	EAX,DWORD [EAX+ESI*1]
   369 000003E1 8D 14 32                        	LEA	EDX,DWORD [EDX+ESI*1]
   370 000003E4 46                              	INC	ESI
   371 000003E5 8A 04 18                        	MOV	AL,BYTE [EAX+EBX*1]
   372 000003E8 81 FE 000000F7                  	CMP	ESI,247
   373 000003EE 88 04 1A                        	MOV	BYTE [EDX+EBX*1],AL
   374 000003F1 7E D8                           	JLE	L57
   375 000003F3 47                              	INC	EDI
   376 000003F4 81 FF 0000008B                  	CMP	EDI,139
   377 000003FA 7E CA                           	JLE	L58
   378 000003FC BF 0000008C                     	MOV	EDI,140
   379 00000401                                 L68:
   380 00000401 BE 00000008                     	MOV	ESI,8
   381 00000406                                 L67:
   382 00000406 8B 55 F0                        	MOV	EDX,DWORD [-16+EBP]
   383 00000409 89 F8                           	MOV	EAX,EDI
   384 0000040B 89 D1                           	MOV	ECX,EDX
   385 0000040D 0F AF 42 04                     	IMUL	EAX,DWORD [4+EDX]
   386 00000411 8B 12                           	MOV	EDX,DWORD [EDX]
   387 00000413 8D 04 30                        	LEA	EAX,DWORD [EAX+ESI*1]
   388 00000416 46                              	INC	ESI
   389 00000417 81 FE 000000F7                  	CMP	ESI,247
   390 0000041D C6 04 10 00                     	MOV	BYTE [EAX+EDX*1],0
   391 00000421 7E E3                           	JLE	L67
   392 00000423 47                              	INC	EDI
   393 00000424 81 FF 0000009B                  	CMP	EDI,155
   394 0000042A 7E D5                           	JLE	L68
   395 0000042C 68 0000009C                     	PUSH	156
   396 00000431 68 000000F8                     	PUSH	248
   397 00000436 6A 1C                           	PUSH	28
   398 00000438 6A 08                           	PUSH	8
   399 0000043A 51                              	PUSH	ECX
   400 0000043B E8 [00000000]                   	CALL	_sheet_refresh
   401 00000440 83 C4 14                        	ADD	ESP,20
   402 00000443 E9 FFFFFF67                     	JMP	L48
   403 00000448                                 	GLOBAL	_cons_putstr0
   404 00000448                                 _cons_putstr0:
   405 00000448 55                              	PUSH	EBP
   406 00000449 89 E5                           	MOV	EBP,ESP
   407 0000044B 56                              	PUSH	ESI
   408 0000044C 53                              	PUSH	EBX
   409 0000044D 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   410 00000450 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
   411 00000453 80 3B 00                        	CMP	BYTE [EBX],0
   412 00000456 75 07                           	JNE	L82
   413 00000458                                 L84:
   414 00000458 8D 65 F8                        	LEA	ESP,DWORD [-8+EBP]
   415 0000045B 5B                              	POP	EBX
   416 0000045C 5E                              	POP	ESI
   417 0000045D 5D                              	POP	EBP
   418 0000045E C3                              	RET
   419 0000045F                                 L82:
   420 0000045F 6A 01                           	PUSH	1
   421 00000461 0F BE 03                        	MOVSX	EAX,BYTE [EBX]
   422 00000464 50                              	PUSH	EAX
   423 00000465 43                              	INC	EBX
   424 00000466 56                              	PUSH	ESI
   425 00000467 E8 FFFFFE7E                     	CALL	_cons_putchar
   426 0000046C 83 C4 0C                        	ADD	ESP,12
   427 0000046F 80 3B 00                        	CMP	BYTE [EBX],0
   428 00000472 75 EB                           	JNE	L82
   429 00000474 EB E2                           	JMP	L84
   430 00000476                                 	GLOBAL	_cons_putstr1
   431 00000476                                 _cons_putstr1:
   432 00000476 55                              	PUSH	EBP
   433 00000477 89 E5                           	MOV	EBP,ESP
   434 00000479 57                              	PUSH	EDI
   435 0000047A 56                              	PUSH	ESI
   436 0000047B 53                              	PUSH	EBX
   437 0000047C 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   438 0000047F 31 DB                           	XOR	EBX,EBX
   439 00000481 8B 7D 0C                        	MOV	EDI,DWORD [12+EBP]
   440 00000484 39 F3                           	CMP	EBX,ESI
   441 00000486 7C 08                           	JL	L90
   442 00000488                                 L92:
   443 00000488 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   444 0000048B 5B                              	POP	EBX
   445 0000048C 5E                              	POP	ESI
   446 0000048D 5F                              	POP	EDI
   447 0000048E 5D                              	POP	EBP
   448 0000048F C3                              	RET
   449 00000490                                 L90:
   450 00000490 6A 01                           	PUSH	1
   451 00000492 0F BE 04 3B                     	MOVSX	EAX,BYTE [EBX+EDI*1]
   452 00000496 50                              	PUSH	EAX
   453 00000497 43                              	INC	EBX
   454 00000498 FF 75 08                        	PUSH	DWORD [8+EBP]
   455 0000049B E8 FFFFFE4A                     	CALL	_cons_putchar
   456 000004A0 83 C4 0C                        	ADD	ESP,12
   457 000004A3 39 F3                           	CMP	EBX,ESI
   458 000004A5 7C E9                           	JL	L90
   459 000004A7 EB DF                           	JMP	L92
   460                                          [SECTION .data]
   461 00000002                                 LC1:
   462 00000002 6D 65 6D 00                     	DB	"mem",0x00
   463 00000006                                 LC2:
   464 00000006 63 6C 73 00                     	DB	"cls",0x00
   465 0000000A                                 LC3:
   466 0000000A 64 69 72 00                     	DB	"dir",0x00
   467 0000000E                                 LC4:
   468 0000000E 74 79 70 65 20 00               	DB	"type ",0x00
   469 00000014                                 LC5:
   470 00000014 42 61 64 20 63 6F 6D 6D 61 6E   	DB	"Bad command.",0x0A,0x0A,0x00
       0000001E 64 2E 0A 0A 00 
   471                                          [SECTION .text]
   472 000004A9                                 	GLOBAL	_cons_runcmd
   473 000004A9                                 _cons_runcmd:
   474 000004A9 55                              	PUSH	EBP
   475 000004AA 89 E5                           	MOV	EBP,ESP
   476 000004AC 57                              	PUSH	EDI
   477 000004AD 56                              	PUSH	ESI
   478 000004AE BF [00000002]                   	MOV	EDI,LC1
   479 000004B3 53                              	PUSH	EBX
   480 000004B4 83 EC 0C                        	SUB	ESP,12
   481 000004B7 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
   482 000004BA 8B 4D 10                        	MOV	ECX,DWORD [16+EBP]
   483 000004BD 89 45 E8                        	MOV	DWORD [-24+EBP],EAX
   484 000004C0 89 4D F0                        	MOV	DWORD [-16+EBP],ECX
   485 000004C3 8B 45 14                        	MOV	EAX,DWORD [20+EBP]
   486 000004C6 8B 75 E8                        	MOV	ESI,DWORD [-24+EBP]
   487 000004C9 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   488 000004CC 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   489 000004CF B8 00000004                     	MOV	EAX,4
   490 000004D4 FC                              	CLD
   491 000004D5 89 C1                           	MOV	ECX,EAX
   492 000004D7 F3                              	REPE
   493 000004D8 A6                              	CMPSB
   494 000004D9 0F 84 000000AD                  	JE	L104
   495 000004DF B8 00000004                     	MOV	EAX,4
   496 000004E4 8B 75 E8                        	MOV	ESI,DWORD [-24+EBP]
   497 000004E7 FC                              	CLD
   498 000004E8 BF [00000006]                   	MOV	EDI,LC2
   499 000004ED 89 C1                           	MOV	ECX,EAX
   500 000004EF F3                              	REPE
   501 000004F0 A6                              	CMPSB
   502 000004F1 0F 84 00000089                  	JE	L105
   503 000004F7 B8 00000004                     	MOV	EAX,4
   504 000004FC 8B 75 E8                        	MOV	ESI,DWORD [-24+EBP]
   505 000004FF FC                              	CLD
   506 00000500 BF [0000000A]                   	MOV	EDI,LC3
   507 00000505 89 C1                           	MOV	ECX,EAX
   508 00000507 F3                              	REPE
   509 00000508 A6                              	CMPSB
   510 00000509 74 66                           	JE	L106
   511 0000050B B8 00000005                     	MOV	EAX,5
   512 00000510 8B 75 E8                        	MOV	ESI,DWORD [-24+EBP]
   513 00000513 FC                              	CLD
   514 00000514 BF [0000000E]                   	MOV	EDI,LC4
   515 00000519 89 C1                           	MOV	ECX,EAX
   516 0000051B F3                              	REPE
   517 0000051C A6                              	CMPSB
   518 0000051D 74 37                           	JE	L107
   519 0000051F 8B 45 E8                        	MOV	EAX,DWORD [-24+EBP]
   520 00000522 80 38 00                        	CMP	BYTE [EAX],0
   521 00000525 75 08                           	JNE	L108
   522 00000527                                 L93:
   523 00000527 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   524 0000052A 5B                              	POP	EBX
   525 0000052B 5E                              	POP	ESI
   526 0000052C 5F                              	POP	EDI
   527 0000052D 5D                              	POP	EBP
   528 0000052E C3                              	RET
   529 0000052F                                 L108:
   530 0000052F 50                              	PUSH	EAX
   531 00000530 FF 75 F0                        	PUSH	DWORD [-16+EBP]
   532 00000533 53                              	PUSH	EBX
   533 00000534 E8 0000021E                     	CALL	_cmd_app
   534 00000539 83 C4 0C                        	ADD	ESP,12
   535 0000053C 85 C0                           	TEST	EAX,EAX
   536 0000053E 75 E7                           	JNE	L93
   537 00000540 C7 45 0C [00000014]             	MOV	DWORD [12+EBP],LC5
   538 00000547 89 5D 08                        	MOV	DWORD [8+EBP],EBX
   539 0000054A 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   540 0000054D 5B                              	POP	EBX
   541 0000054E 5E                              	POP	ESI
   542 0000054F 5F                              	POP	EDI
   543 00000550 5D                              	POP	EBP
   544 00000551 E9 FFFFFEF2                     	JMP	_cons_putstr0
   545 00000556                                 L107:
   546 00000556 8B 45 E8                        	MOV	EAX,DWORD [-24+EBP]
   547 00000559 8B 4D F0                        	MOV	ECX,DWORD [-16+EBP]
   548 0000055C 89 45 10                        	MOV	DWORD [16+EBP],EAX
   549 0000055F 89 4D 0C                        	MOV	DWORD [12+EBP],ECX
   550 00000562 89 5D 08                        	MOV	DWORD [8+EBP],EBX
   551 00000565 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   552 00000568 5B                              	POP	EBX
   553 00000569 5E                              	POP	ESI
   554 0000056A 5F                              	POP	EDI
   555 0000056B 5D                              	POP	EBP
   556 0000056C E9 00000156                     	JMP	_cmd_type
   557 00000571                                 L106:
   558 00000571 89 5D 08                        	MOV	DWORD [8+EBP],EBX
   559 00000574 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   560 00000577 5B                              	POP	EBX
   561 00000578 5E                              	POP	ESI
   562 00000579 5F                              	POP	EDI
   563 0000057A 5D                              	POP	EBP
   564 0000057B E9 000000B1                     	JMP	_cmd_dir
   565 00000580                                 L105:
   566 00000580 89 5D 08                        	MOV	DWORD [8+EBP],EBX
   567 00000583 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   568 00000586 5B                              	POP	EBX
   569 00000587 5E                              	POP	ESI
   570 00000588 5F                              	POP	EDI
   571 00000589 5D                              	POP	EBP
   572 0000058A EB 4C                           	JMP	_cmd_cls
   573 0000058C                                 L104:
   574 0000058C 8B 45 EC                        	MOV	EAX,DWORD [-20+EBP]
   575 0000058F 89 5D 08                        	MOV	DWORD [8+EBP],EBX
   576 00000592 89 45 0C                        	MOV	DWORD [12+EBP],EAX
   577 00000595 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   578 00000598 5B                              	POP	EBX
   579 00000599 5E                              	POP	ESI
   580 0000059A 5F                              	POP	EDI
   581 0000059B 5D                              	POP	EBP
   582 0000059C EB 00                           	JMP	_cmd_mem
   583                                          [SECTION .data]
   584 00000023                                 LC6:
   585 00000023 74 6F 74 61 6C 20 20 20 25 64   	DB	"total   %dMB",0x0A,"free %dKB",0x0A,0x0A,0x00
       0000002D 4D 42 0A 66 72 65 65 20 25 64 
       00000037 4B 42 0A 0A 00 
   586                                          [SECTION .text]
   587 0000059E                                 	GLOBAL	_cmd_mem
   588 0000059E                                 _cmd_mem:
   589 0000059E 55                              	PUSH	EBP
   590 0000059F 89 E5                           	MOV	EBP,ESP
   591 000005A1 53                              	PUSH	EBX
   592 000005A2 83 EC 40                        	SUB	ESP,64
   593 000005A5 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   594 000005A8 C1 EB 14                        	SHR	EBX,20
   595 000005AB 68 003C0000                     	PUSH	3932160
   596 000005B0 E8 [00000000]                   	CALL	_memman_total
   597 000005B5 C1 E8 0A                        	SHR	EAX,10
   598 000005B8 89 04 24                        	MOV	DWORD [ESP],EAX
   599 000005BB 53                              	PUSH	EBX
   600 000005BC 68 [00000023]                   	PUSH	LC6
   601 000005C1 8D 5D BC                        	LEA	EBX,DWORD [-68+EBP]
   602 000005C4 53                              	PUSH	EBX
   603 000005C5 E8 [00000000]                   	CALL	_sprintf
   604 000005CA 53                              	PUSH	EBX
   605 000005CB FF 75 08                        	PUSH	DWORD [8+EBP]
   606 000005CE E8 FFFFFE75                     	CALL	_cons_putstr0
   607 000005D3 8B 5D FC                        	MOV	EBX,DWORD [-4+EBP]
   608 000005D6 C9                              	LEAVE
   609 000005D7 C3                              	RET
   610 000005D8                                 	GLOBAL	_cmd_cls
   611 000005D8                                 _cmd_cls:
   612 000005D8 55                              	PUSH	EBP
   613 000005D9 89 E5                           	MOV	EBP,ESP
   614 000005DB 57                              	PUSH	EDI
   615 000005DC 56                              	PUSH	ESI
   616 000005DD BE 0000001C                     	MOV	ESI,28
   617 000005E2 8B 7D 08                        	MOV	EDI,DWORD [8+EBP]
   618 000005E5 53                              	PUSH	EBX
   619 000005E6 8B 1F                           	MOV	EBX,DWORD [EDI]
   620 000005E8                                 L120:
   621 000005E8 B9 00000008                     	MOV	ECX,8
   622 000005ED                                 L119:
   623 000005ED 89 F0                           	MOV	EAX,ESI
   624 000005EF 8B 13                           	MOV	EDX,DWORD [EBX]
   625 000005F1 0F AF 43 04                     	IMUL	EAX,DWORD [4+EBX]
   626 000005F5 8D 04 08                        	LEA	EAX,DWORD [EAX+ECX*1]
   627 000005F8 41                              	INC	ECX
   628 000005F9 81 F9 000000F7                  	CMP	ECX,247
   629 000005FF C6 04 10 00                     	MOV	BYTE [EAX+EDX*1],0
   630 00000603 7E E8                           	JLE	L119
   631 00000605 46                              	INC	ESI
   632 00000606 81 FE 0000009B                  	CMP	ESI,155
   633 0000060C 7E DA                           	JLE	L120
   634 0000060E 68 0000009C                     	PUSH	156
   635 00000613 68 000000F8                     	PUSH	248
   636 00000618 6A 1C                           	PUSH	28
   637 0000061A 6A 08                           	PUSH	8
   638 0000061C 53                              	PUSH	EBX
   639 0000061D E8 [00000000]                   	CALL	_sheet_refresh
   640 00000622 C7 47 08 0000001C               	MOV	DWORD [8+EDI],28
   641 00000629 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   642 0000062C 5B                              	POP	EBX
   643 0000062D 5E                              	POP	ESI
   644 0000062E 5F                              	POP	EDI
   645 0000062F 5D                              	POP	EBP
   646 00000630 C3                              	RET
   647                                          [SECTION .data]
   648 0000003C                                 LC7:
   649 0000003C 66 69 6C 65 6E 61 6D 65 2E 65   	DB	"filename.ext   %7d",0x0A,0x00
       00000046 78 74 20 20 20 25 37 64 0A 00 
   650                                          [SECTION .text]
   651 00000631                                 	GLOBAL	_cmd_dir
   652 00000631                                 _cmd_dir:
   653 00000631 55                              	PUSH	EBP
   654 00000632 89 E5                           	MOV	EBP,ESP
   655 00000634 57                              	PUSH	EDI
   656 00000635 56                              	PUSH	ESI
   657 00000636 31 F6                           	XOR	ESI,ESI
   658 00000638 53                              	PUSH	EBX
   659 00000639 31 DB                           	XOR	EBX,EBX
   660 0000063B 83 EC 20                        	SUB	ESP,32
   661 0000063E 8B 7D 08                        	MOV	EDI,DWORD [8+EBP]
   662 00000641                                 L138:
   663 00000641 8A 83 00102600                  	MOV	AL,BYTE [1058304+EBX]
   664 00000647 84 C0                           	TEST	AL,AL
   665 00000649 74 19                           	JE	L127
   666 0000064B 3C E5                           	CMP	AL,-27
   667 0000064D 74 09                           	JE	L128
   668 0000064F F6 83 0010260B 18               	TEST	BYTE [1058315+EBX],24
   669 00000656 74 1A                           	JE	L142
   670 00000658                                 L128:
   671 00000658 46                              	INC	ESI
   672 00000659 83 C3 20                        	ADD	EBX,32
   673 0000065C 81 FE 000000DF                  	CMP	ESI,223
   674 00000662 7E DD                           	JLE	L138
   675 00000664                                 L127:
   676 00000664 57                              	PUSH	EDI
   677 00000665 E8 FFFFFD23                     	CALL	_cons_newline
   678 0000066A 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   679 0000066D 5B                              	POP	EBX
   680 0000066E 5E                              	POP	ESI
   681 0000066F 5F                              	POP	EDI
   682 00000670 5D                              	POP	EBP
   683 00000671 C3                              	RET
   684 00000672                                 L142:
   685 00000672 FF B3 0010261C                  	PUSH	DWORD [1058332+EBX]
   686 00000678 68 [0000003C]                   	PUSH	LC7
   687 0000067D 8D 45 D4                        	LEA	EAX,DWORD [-44+EBP]
   688 00000680 50                              	PUSH	EAX
   689 00000681 E8 [00000000]                   	CALL	_sprintf
   690 00000686 8D 93 00102600                  	LEA	EDX,DWORD [1058304+EBX]
   691 0000068C 31 C9                           	XOR	ECX,ECX
   692 0000068E 83 C4 0C                        	ADD	ESP,12
   693 00000691                                 L137:
   694 00000691 8A 02                           	MOV	AL,BYTE [EDX]
   695 00000693 42                              	INC	EDX
   696 00000694 88 44 0D D4                     	MOV	BYTE [-44+EBP+ECX*1],AL
   697 00000698 41                              	INC	ECX
   698 00000699 83 F9 07                        	CMP	ECX,7
   699 0000069C 7E F3                           	JLE	L137
   700 0000069E 8A 83 00102608                  	MOV	AL,BYTE [1058312+EBX]
   701 000006A4 88 45 DD                        	MOV	BYTE [-35+EBP],AL
   702 000006A7 8A 83 00102609                  	MOV	AL,BYTE [1058313+EBX]
   703 000006AD 88 45 DE                        	MOV	BYTE [-34+EBP],AL
   704 000006B0 8A 83 0010260A                  	MOV	AL,BYTE [1058314+EBX]
   705 000006B6 88 45 DF                        	MOV	BYTE [-33+EBP],AL
   706 000006B9 8D 45 D4                        	LEA	EAX,DWORD [-44+EBP]
   707 000006BC 50                              	PUSH	EAX
   708 000006BD 57                              	PUSH	EDI
   709 000006BE E8 FFFFFD85                     	CALL	_cons_putstr0
   710 000006C3 58                              	POP	EAX
   711 000006C4 5A                              	POP	EDX
   712 000006C5 EB 91                           	JMP	L128
   713                                          [SECTION .data]
   714 00000050                                 LC8:
   715 00000050 46 69 6C 65 20 6E 6F 74 20 66   	DB	"File not found.",0x0A,0x00
       0000005A 6F 75 6E 64 2E 0A 00 
   716                                          [SECTION .text]
   717 000006C7                                 	GLOBAL	_cmd_type
   718 000006C7                                 _cmd_type:
   719 000006C7 55                              	PUSH	EBP
   720 000006C8 89 E5                           	MOV	EBP,ESP
   721 000006CA 57                              	PUSH	EDI
   722 000006CB 56                              	PUSH	ESI
   723 000006CC 53                              	PUSH	EBX
   724 000006CD 56                              	PUSH	ESI
   725 000006CE 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
   726 000006D1 8B 7D 08                        	MOV	EDI,DWORD [8+EBP]
   727 000006D4 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   728 000006D7 68 000000E0                     	PUSH	224
   729 000006DC 68 00102600                     	PUSH	1058304
   730 000006E1 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   731 000006E4 83 C0 05                        	ADD	EAX,5
   732 000006E7 50                              	PUSH	EAX
   733 000006E8 E8 [00000000]                   	CALL	_file_search
   734 000006ED 83 C4 0C                        	ADD	ESP,12
   735 000006F0 89 C6                           	MOV	ESI,EAX
   736 000006F2 85 C0                           	TEST	EAX,EAX
   737 000006F4 74 52                           	JE	L144
   738 000006F6 FF 70 1C                        	PUSH	DWORD [28+EAX]
   739 000006F9 68 003C0000                     	PUSH	3932160
   740 000006FE E8 [00000000]                   	CALL	_memman_alloc_4k
   741 00000703 68 00103E00                     	PUSH	1064448
   742 00000708 FF 75 F0                        	PUSH	DWORD [-16+EBP]
   743 0000070B 50                              	PUSH	EAX
   744 0000070C 89 C3                           	MOV	EBX,EAX
   745 0000070E FF 76 1C                        	PUSH	DWORD [28+ESI]
   746 00000711 0F B7 46 1A                     	MOVZX	EAX,WORD [26+ESI]
   747 00000715 50                              	PUSH	EAX
   748 00000716 E8 [00000000]                   	CALL	_file_loadfile
   749 0000071B FF 76 1C                        	PUSH	DWORD [28+ESI]
   750 0000071E 53                              	PUSH	EBX
   751 0000071F 57                              	PUSH	EDI
   752 00000720 E8 FFFFFD51                     	CALL	_cons_putstr1
   753 00000725 83 C4 28                        	ADD	ESP,40
   754 00000728 FF 76 1C                        	PUSH	DWORD [28+ESI]
   755 0000072B 53                              	PUSH	EBX
   756 0000072C 68 003C0000                     	PUSH	3932160
   757 00000731 E8 [00000000]                   	CALL	_memman_free_4k
   758 00000736 83 C4 0C                        	ADD	ESP,12
   759 00000739                                 L145:
   760 00000739 89 7D 08                        	MOV	DWORD [8+EBP],EDI
   761 0000073C 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   762 0000073F 5B                              	POP	EBX
   763 00000740 5E                              	POP	ESI
   764 00000741 5F                              	POP	EDI
   765 00000742 5D                              	POP	EBP
   766 00000743 E9 FFFFFC45                     	JMP	_cons_newline
   767 00000748                                 L144:
   768 00000748 68 [00000050]                   	PUSH	LC8
   769 0000074D 57                              	PUSH	EDI
   770 0000074E E8 FFFFFCF5                     	CALL	_cons_putstr0
   771 00000753 59                              	POP	ECX
   772 00000754 5B                              	POP	EBX
   773 00000755 EB E2                           	JMP	L145
   774                                          [SECTION .data]
   775 00000061                                 LC9:
   776 00000061 48 61 72 69 00                  	DB	"Hari",0x00
   777 00000066                                 LC10:
   778 00000066 2E 68 72 62 20 66 69 6C 65 20   	DB	".hrb file format error.",0x0A,0x00
       00000070 66 6F 72 6D 61 74 20 65 72 72 
       0000007A 6F 72 2E 0A 00 
   779                                          [SECTION .text]
   780 00000757                                 	GLOBAL	_cmd_app
   781 00000757                                 _cmd_app:
   782 00000757 55                              	PUSH	EBP
   783 00000758 89 E5                           	MOV	EBP,ESP
   784 0000075A 57                              	PUSH	EDI
   785 0000075B 56                              	PUSH	ESI
   786 0000075C 53                              	PUSH	EBX
   787 0000075D 31 DB                           	XOR	EBX,EBX
   788 0000075F 83 EC 38                        	SUB	ESP,56
   789 00000762 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   790 00000765 E8 [00000000]                   	CALL	_task_now
   791 0000076A 89 45 C8                        	MOV	DWORD [-56+EBP],EAX
   792 0000076D                                 L152:
   793 0000076D 8A 04 33                        	MOV	AL,BYTE [EBX+ESI*1]
   794 00000770 3C 20                           	CMP	AL,32
   795 00000772 7E 0A                           	JLE	L148
   796 00000774 88 44 1D D4                     	MOV	BYTE [-44+EBP+EBX*1],AL
   797 00000778 43                              	INC	EBX
   798 00000779 83 FB 0C                        	CMP	EBX,12
   799 0000077C 7E EF                           	JLE	L152
   800 0000077E                                 L148:
   801 0000077E 68 000000E0                     	PUSH	224
   802 00000783 8D 75 D4                        	LEA	ESI,DWORD [-44+EBP]
   803 00000786 68 00102600                     	PUSH	1058304
   804 0000078B 56                              	PUSH	ESI
   805 0000078C C6 44 1D D4 00                  	MOV	BYTE [-44+EBP+EBX*1],0
   806 00000791 E8 [00000000]                   	CALL	_file_search
   807 00000796 83 C4 0C                        	ADD	ESP,12
   808 00000799 85 C0                           	TEST	EAX,EAX
   809 0000079B 89 45 D0                        	MOV	DWORD [-48+EBP],EAX
   810 0000079E 0F 84 00000167                  	JE	L174
   811 000007A4                                 L173:
   812 000007A4 8B 45 D0                        	MOV	EAX,DWORD [-48+EBP]
   813 000007A7 FF 70 1C                        	PUSH	DWORD [28+EAX]
   814 000007AA 68 003C0000                     	PUSH	3932160
   815 000007AF E8 [00000000]                   	CALL	_memman_alloc_4k
   816 000007B4 8B 55 D0                        	MOV	EDX,DWORD [-48+EBP]
   817 000007B7 68 00103E00                     	PUSH	1064448
   818 000007BC FF 75 0C                        	PUSH	DWORD [12+EBP]
   819 000007BF 50                              	PUSH	EAX
   820 000007C0 89 45 BC                        	MOV	DWORD [-68+EBP],EAX
   821 000007C3 FF 72 1C                        	PUSH	DWORD [28+EDX]
   822 000007C6 0F B7 42 1A                     	MOVZX	EAX,WORD [26+EDX]
   823 000007CA 50                              	PUSH	EAX
   824 000007CB E8 [00000000]                   	CALL	_file_loadfile
   825 000007D0 8B 7D D0                        	MOV	EDI,DWORD [-48+EBP]
   826 000007D3 83 C4 1C                        	ADD	ESP,28
   827 000007D6 83 7F 1C 23                     	CMP	DWORD [28+EDI],35
   828 000007DA 76 1F                           	JBE	L155
   829 000007DC 8B 75 BC                        	MOV	ESI,DWORD [-68+EBP]
   830 000007DF B8 [00000061]                   	MOV	EAX,LC9
   831 000007E4 FC                              	CLD
   832 000007E5 83 C6 04                        	ADD	ESI,4
   833 000007E8 B9 00000004                     	MOV	ECX,4
   834 000007ED 89 C7                           	MOV	EDI,EAX
   835 000007EF F3                              	REPE
   836 000007F0 A6                              	CMPSB
   837 000007F1 75 08                           	JNE	L155
   838 000007F3 8B 45 BC                        	MOV	EAX,DWORD [-68+EBP]
   839 000007F6 80 38 00                        	CMP	BYTE [EAX],0
   840 000007F9 74 37                           	JE	L175
   841 000007FB                                 L155:
   842 000007FB 68 [00000066]                   	PUSH	LC10
   843 00000800 FF 75 08                        	PUSH	DWORD [8+EBP]
   844 00000803 E8 FFFFFC40                     	CALL	_cons_putstr0
   845 00000808 5F                              	POP	EDI
   846 00000809 58                              	POP	EAX
   847 0000080A                                 L167:
   848 0000080A 8B 55 D0                        	MOV	EDX,DWORD [-48+EBP]
   849 0000080D FF 72 1C                        	PUSH	DWORD [28+EDX]
   850 00000810 FF 75 BC                        	PUSH	DWORD [-68+EBP]
   851 00000813 68 003C0000                     	PUSH	3932160
   852 00000818 E8 [00000000]                   	CALL	_memman_free_4k
   853 0000081D FF 75 08                        	PUSH	DWORD [8+EBP]
   854 00000820 E8 FFFFFB68                     	CALL	_cons_newline
   855 00000825 B8 00000001                     	MOV	EAX,1
   856 0000082A                                 L146:
   857 0000082A 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   858 0000082D 5B                              	POP	EBX
   859 0000082E 5E                              	POP	ESI
   860 0000082F 5F                              	POP	EDI
   861 00000830 5D                              	POP	EBP
   862 00000831 C3                              	RET
   863 00000832                                 L175:
   864 00000832 8B 10                           	MOV	EDX,DWORD [EAX]
   865 00000834 8B 78 0C                        	MOV	EDI,DWORD [12+EAX]
   866 00000837 8B 58 10                        	MOV	EBX,DWORD [16+EAX]
   867 0000083A 8B 70 14                        	MOV	ESI,DWORD [20+EAX]
   868 0000083D 52                              	PUSH	EDX
   869 0000083E 89 55 C4                        	MOV	DWORD [-60+EBP],EDX
   870 00000841 68 003C0000                     	PUSH	3932160
   871 00000846 89 7D C0                        	MOV	DWORD [-64+EBP],EDI
   872 00000849 E8 [00000000]                   	CALL	_memman_alloc_4k
   873 0000084E 8B 55 D0                        	MOV	EDX,DWORD [-48+EBP]
   874 00000851 A3 00000FE8                     	MOV	DWORD [4072],EAX
   875 00000856 68 000040FA                     	PUSH	16634
   876 0000085B FF 75 BC                        	PUSH	DWORD [-68+EBP]
   877 0000085E 89 45 CC                        	MOV	DWORD [-52+EBP],EAX
   878 00000861 8B 42 1C                        	MOV	EAX,DWORD [28+EDX]
   879 00000864 48                              	DEC	EAX
   880 00000865 50                              	PUSH	EAX
   881 00000866 68 00271F58                     	PUSH	2563928
   882 0000086B E8 [00000000]                   	CALL	_set_segmdesc
   883 00000870 8B 45 C4                        	MOV	EAX,DWORD [-60+EBP]
   884 00000873 68 000040F2                     	PUSH	16626
   885 00000878 48                              	DEC	EAX
   886 00000879 FF 75 CC                        	PUSH	DWORD [-52+EBP]
   887 0000087C 50                              	PUSH	EAX
   888 0000087D 68 00271F60                     	PUSH	2563936
   889 00000882 E8 [00000000]                   	CALL	_set_segmdesc
   890 00000887 83 C4 28                        	ADD	ESP,40
   891 0000088A 85 DB                           	TEST	EBX,EBX
   892 0000088C 7E 14                           	JLE	L170
   893 0000088E 89 F9                           	MOV	ECX,EDI
   894 00000890 8B 7D BC                        	MOV	EDI,DWORD [-68+EBP]
   895 00000893 03 4D CC                        	ADD	ECX,DWORD [-52+EBP]
   896 00000896 8D 14 37                        	LEA	EDX,DWORD [EDI+ESI*1]
   897 00000899                                 L160:
   898 00000899 8A 02                           	MOV	AL,BYTE [EDX]
   899 0000089B 42                              	INC	EDX
   900 0000089C 88 01                           	MOV	BYTE [ECX],AL
   901 0000089E 41                              	INC	ECX
   902 0000089F 4B                              	DEC	EBX
   903 000008A0 75 F7                           	JNE	L160
   904 000008A2                                 L170:
   905 000008A2 8B 45 C8                        	MOV	EAX,DWORD [-56+EBP]
   906 000008A5 BB 000000FF                     	MOV	EBX,255
   907 000008AA 83 C0 30                        	ADD	EAX,48
   908 000008AD 50                              	PUSH	EAX
   909 000008AE 68 00001F60                     	PUSH	8032
   910 000008B3 FF 75 C0                        	PUSH	DWORD [-64+EBP]
   911 000008B6 68 00001F58                     	PUSH	8024
   912 000008BB 6A 1B                           	PUSH	27
   913 000008BD E8 [00000000]                   	CALL	_start_app
   914 000008C2 8B 35 00000FE4                  	MOV	ESI,DWORD [4068]
   915 000008C8 83 C4 14                        	ADD	ESP,20
   916 000008CB 81 C6 00000414                  	ADD	ESI,1044
   917 000008D1                                 L166:
   918 000008D1 8B 46 1C                        	MOV	EAX,DWORD [28+ESI]
   919 000008D4 83 E0 11                        	AND	EAX,17
   920 000008D7 83 F8 11                        	CMP	EAX,17
   921 000008DA 74 1E                           	JE	L176
   922 000008DC                                 L163:
   923 000008DC 83 C6 28                        	ADD	ESI,40
   924 000008DF 4B                              	DEC	EBX
   925 000008E0 79 EF                           	JNS	L166
   926 000008E2 FF 75 C4                        	PUSH	DWORD [-60+EBP]
   927 000008E5 FF 75 CC                        	PUSH	DWORD [-52+EBP]
   928 000008E8 68 003C0000                     	PUSH	3932160
   929 000008ED E8 [00000000]                   	CALL	_memman_free_4k
   930 000008F2 83 C4 0C                        	ADD	ESP,12
   931 000008F5 E9 FFFFFF10                     	JMP	L167
   932 000008FA                                 L176:
   933 000008FA 8B 45 C8                        	MOV	EAX,DWORD [-56+EBP]
   934 000008FD 39 46 24                        	CMP	DWORD [36+ESI],EAX
   935 00000900 75 DA                           	JNE	L163
   936 00000902 56                              	PUSH	ESI
   937 00000903 E8 [00000000]                   	CALL	_sheet_free
   938 00000908 58                              	POP	EAX
   939 00000909 EB D1                           	JMP	L163
   940 0000090B                                 L174:
   941 0000090B 80 7C 1D D3 2E                  	CMP	BYTE [-45+EBP+EBX*1],46
   942 00000910 74 2F                           	JE	L153
   943 00000912 68 000000E0                     	PUSH	224
   944 00000917 68 00102600                     	PUSH	1058304
   945 0000091C 56                              	PUSH	ESI
   946 0000091D C6 44 1D D4 2E                  	MOV	BYTE [-44+EBP+EBX*1],46
   947 00000922 C6 44 1D D5 48                  	MOV	BYTE [-43+EBP+EBX*1],72
   948 00000927 C6 44 1D D6 52                  	MOV	BYTE [-42+EBP+EBX*1],82
   949 0000092C C6 44 1D D7 42                  	MOV	BYTE [-41+EBP+EBX*1],66
   950 00000931 C6 44 1D D8 00                  	MOV	BYTE [-40+EBP+EBX*1],0
   951 00000936 E8 [00000000]                   	CALL	_file_search
   952 0000093B 83 C4 0C                        	ADD	ESP,12
   953 0000093E 89 45 D0                        	MOV	DWORD [-48+EBP],EAX
   954 00000941                                 L153:
   955 00000941 83 7D D0 00                     	CMP	DWORD [-48+EBP],0
   956 00000945 0F 85 FFFFFE59                  	JNE	L173
   957 0000094B 31 C0                           	XOR	EAX,EAX
   958 0000094D E9 FFFFFED8                     	JMP	L146
   959 00000952                                 	GLOBAL	_hrb_api
   960 00000952                                 _hrb_api:
   961 00000952 55                              	PUSH	EBP
   962 00000953 89 E5                           	MOV	EBP,ESP
   963 00000955 57                              	PUSH	EDI
   964 00000956 56                              	PUSH	ESI
   965 00000957 53                              	PUSH	EBX
   966 00000958 57                              	PUSH	EDI
   967 00000959 57                              	PUSH	EDI
   968 0000095A 8B 75 1C                        	MOV	ESI,DWORD [28+EBP]
   969 0000095D 8B 5D 18                        	MOV	EBX,DWORD [24+EBP]
   970 00000960 8B 3D 00000FE8                  	MOV	EDI,DWORD [4072]
   971 00000966 E8 [00000000]                   	CALL	_task_now
   972 0000096B 83 FE 01                        	CMP	ESI,1
   973 0000096E 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   974 00000971 A1 00000FEC                     	MOV	EAX,DWORD [4076]
   975 00000976 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   976 00000979 A1 00000FE4                     	MOV	EAX,DWORD [4068]
   977 0000097E 0F 84 0000034D                  	JE	L238
   978 00000984 83 FE 02                        	CMP	ESI,2
   979 00000987 0F 84 00000333                  	JE	L239
   980 0000098D 83 FE 03                        	CMP	ESI,3
   981 00000990 0F 84 00000316                  	JE	L240
   982 00000996 83 FE 04                        	CMP	ESI,4
   983 00000999 0F 84 00000302                  	JE	L241
   984 0000099F 83 FE 05                        	CMP	ESI,5
   985 000009A2 0F 84 000002A4                  	JE	L242
   986 000009A8 83 FE 06                        	CMP	ESI,6
   987 000009AB 0F 84 00000255                  	JE	L243
   988 000009B1 83 FE 07                        	CMP	ESI,7
   989 000009B4 0F 84 00000224                  	JE	L244
   990 000009BA 83 FE 08                        	CMP	ESI,8
   991 000009BD 0F 84 000001FB                  	JE	L245
   992 000009C3 83 FE 09                        	CMP	ESI,9
   993 000009C6 0F 84 000001D7                  	JE	L246
   994 000009CC 83 FE 0A                        	CMP	ESI,10
   995 000009CF 0F 84 000001B3                  	JE	L247
   996 000009D5 83 FE 0B                        	CMP	ESI,11
   997 000009D8 0F 84 00000178                  	JE	L248
   998 000009DE 83 FE 0C                        	CMP	ESI,12
   999 000009E1 0F 84 00000160                  	JE	L249
  1000 000009E7 83 FE 0D                        	CMP	ESI,13
  1001 000009EA 0F 84 00000113                  	JE	L250
  1002 000009F0 83 FE 0E                        	CMP	ESI,14
  1003 000009F3 0F 84 000000FF                  	JE	L251
  1004 000009F9 83 FE 0F                        	CMP	ESI,15
  1005 000009FC 74 59                           	JE	L211
  1006 000009FE 83 FE 10                        	CMP	ESI,16
  1007 00000A01 74 4A                           	JE	L252
  1008 00000A03 83 FE 11                        	CMP	ESI,17
  1009 00000A06 74 2A                           	JE	L253
  1010 00000A08 83 FE 12                        	CMP	ESI,18
  1011 00000A0B 74 18                           	JE	L254
  1012 00000A0D 83 FE 13                        	CMP	ESI,19
  1013 00000A10 74 0A                           	JE	L255
  1014 00000A12                                 L179:
  1015 00000A12 31 C0                           	XOR	EAX,EAX
  1016 00000A14                                 L177:
  1017 00000A14 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
  1018 00000A17 5B                              	POP	EBX
  1019 00000A18 5E                              	POP	ESI
  1020 00000A19 5F                              	POP	EDI
  1021 00000A1A 5D                              	POP	EBP
  1022 00000A1B C3                              	RET
  1023 00000A1C                                 L255:
  1024 00000A1C 53                              	PUSH	EBX
  1025 00000A1D E8 [00000000]                   	CALL	_timer_free
  1026 00000A22                                 L229:
  1027 00000A22 58                              	POP	EAX
  1028 00000A23 EB ED                           	JMP	L179
  1029 00000A25                                 L254:
  1030 00000A25 FF 75 24                        	PUSH	DWORD [36+EBP]
  1031 00000A28 53                              	PUSH	EBX
  1032 00000A29 E8 [00000000]                   	CALL	_timer_settime
  1033 00000A2E                                 L232:
  1034 00000A2E 58                              	POP	EAX
  1035 00000A2F 5A                              	POP	EDX
  1036 00000A30 EB E0                           	JMP	L179
  1037 00000A32                                 L253:
  1038 00000A32 8B 45 24                        	MOV	EAX,DWORD [36+EBP]
  1039 00000A35 05 00000100                     	ADD	EAX,256
  1040 00000A3A 50                              	PUSH	EAX
  1041 00000A3B 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
  1042 00000A3E 83 C0 10                        	ADD	EAX,16
  1043 00000A41 50                              	PUSH	EAX
  1044 00000A42 53                              	PUSH	EBX
  1045 00000A43 E8 [00000000]                   	CALL	_timer_init
  1046 00000A48                                 L231:
  1047 00000A48 83 C4 0C                        	ADD	ESP,12
  1048 00000A4B EB C5                           	JMP	L179
  1049 00000A4D                                 L252:
  1050 00000A4D E8 [00000000]                   	CALL	_timer_alloc
  1051 00000A52                                 L236:
  1052 00000A52 89 45 44                        	MOV	DWORD [68+EBP],EAX
  1053 00000A55 EB BB                           	JMP	L179
  1054 00000A57                                 L211:
  1055 00000A57 E8 [00000000]                   	CALL	_io_cli
  1056 00000A5C 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
  1057 00000A5F 83 C0 10                        	ADD	EAX,16
  1058 00000A62 50                              	PUSH	EAX
  1059 00000A63 E8 [00000000]                   	CALL	_fifo32_status
  1060 00000A68 5E                              	POP	ESI
  1061 00000A69 85 C0                           	TEST	EAX,EAX
  1062 00000A6B 75 0F                           	JNE	L214
  1063 00000A6D 83 7D 24 00                     	CMP	DWORD [36+EBP],0
  1064 00000A71 74 74                           	JE	L215
  1065 00000A73 FF 75 F0                        	PUSH	DWORD [-16+EBP]
  1066 00000A76 E8 [00000000]                   	CALL	_task_sleep
  1067 00000A7B 5B                              	POP	EBX
  1068 00000A7C                                 L214:
  1069 00000A7C 8B 75 F0                        	MOV	ESI,DWORD [-16+EBP]
  1070 00000A7F 83 C6 10                        	ADD	ESI,16
  1071 00000A82 56                              	PUSH	ESI
  1072 00000A83 E8 [00000000]                   	CALL	_fifo32_get
  1073 00000A88 89 C3                           	MOV	EBX,EAX
  1074 00000A8A E8 [00000000]                   	CALL	_io_sti
  1075 00000A8F 59                              	POP	ECX
  1076 00000A90 83 FB 01                        	CMP	EBX,1
  1077 00000A93 7E 32                           	JLE	L256
  1078 00000A95                                 L217:
  1079 00000A95 83 FB 02                        	CMP	EBX,2
  1080 00000A98 74 21                           	JE	L257
  1081 00000A9A                                 L218:
  1082 00000A9A 83 FB 03                        	CMP	EBX,3
  1083 00000A9D 74 10                           	JE	L258
  1084 00000A9F                                 L219:
  1085 00000A9F 8D 83 FFFFFF00                  	LEA	EAX,DWORD [-256+EBX]
  1086 00000AA5 81 FB 000000FF                  	CMP	EBX,255
  1087 00000AAB 7F A5                           	JG	L236
  1088 00000AAD EB A8                           	JMP	L211
  1089 00000AAF                                 L258:
  1090 00000AAF 8B 4D EC                        	MOV	ECX,DWORD [-20+EBP]
  1091 00000AB2 C7 41 0C FFFFFFFF               	MOV	DWORD [12+ECX],-1
  1092 00000AB9 EB E4                           	JMP	L219
  1093 00000ABB                                 L257:
  1094 00000ABB 8B 55 EC                        	MOV	EDX,DWORD [-20+EBP]
  1095 00000ABE C7 42 0C 00000007               	MOV	DWORD [12+EDX],7
  1096 00000AC5 EB D3                           	JMP	L218
  1097 00000AC7                                 L256:
  1098 00000AC7 6A 01                           	PUSH	1
  1099 00000AC9 8B 4D EC                        	MOV	ECX,DWORD [-20+EBP]
  1100 00000ACC 56                              	PUSH	ESI
  1101 00000ACD FF 71 10                        	PUSH	DWORD [16+ECX]
  1102 00000AD0 E8 [00000000]                   	CALL	_timer_init
  1103 00000AD5 8B 45 EC                        	MOV	EAX,DWORD [-20+EBP]
  1104 00000AD8 6A 32                           	PUSH	50
  1105 00000ADA FF 70 10                        	PUSH	DWORD [16+EAX]
  1106 00000ADD E8 [00000000]                   	CALL	_timer_settime
  1107 00000AE2 83 C4 14                        	ADD	ESP,20
  1108 00000AE5 EB AE                           	JMP	L217
  1109 00000AE7                                 L215:
  1110 00000AE7 E8 [00000000]                   	CALL	_io_sti
  1111 00000AEC C7 45 44 FFFFFFFF               	MOV	DWORD [68+EBP],-1
  1112 00000AF3 E9 FFFFFF1A                     	JMP	L179
  1113 00000AF8                                 L251:
  1114 00000AF8 53                              	PUSH	EBX
  1115 00000AF9 E8 [00000000]                   	CALL	_sheet_free
  1116 00000AFE E9 FFFFFF1F                     	JMP	L229
  1117 00000B03                                 L250:
  1118 00000B03 FF 75 10                        	PUSH	DWORD [16+EBP]
  1119 00000B06 FF 75 08                        	PUSH	DWORD [8+EBP]
  1120 00000B09 FF 75 0C                        	PUSH	DWORD [12+EBP]
  1121 00000B0C FF 75 20                        	PUSH	DWORD [32+EBP]
  1122 00000B0F 89 DE                           	MOV	ESI,EBX
  1123 00000B11 FF 75 24                        	PUSH	DWORD [36+EBP]
  1124 00000B14 83 E6 FE                        	AND	ESI,-2
  1125 00000B17 56                              	PUSH	ESI
  1126 00000B18 E8 0000025A                     	CALL	_hrb_api_linewin
  1127 00000B1D 83 C4 18                        	ADD	ESP,24
  1128 00000B20                                 L237:
  1129 00000B20 83 E3 01                        	AND	EBX,1
  1130 00000B23 0F 85 FFFFFEE9                  	JNE	L179
  1131 00000B29 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
  1132 00000B2C 40                              	INC	EAX
  1133 00000B2D 50                              	PUSH	EAX
  1134 00000B2E 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
  1135 00000B31 40                              	INC	EAX
  1136 00000B32 50                              	PUSH	EAX
  1137 00000B33 FF 75 20                        	PUSH	DWORD [32+EBP]
  1138 00000B36 FF 75 24                        	PUSH	DWORD [36+EBP]
  1139 00000B39                                 L234:
  1140 00000B39 56                              	PUSH	ESI
  1141 00000B3A                                 L230:
  1142 00000B3A E8 [00000000]                   	CALL	_sheet_refresh
  1143 00000B3F                                 L233:
  1144 00000B3F 83 C4 14                        	ADD	ESP,20
  1145 00000B42 E9 FFFFFECB                     	JMP	L179
  1146 00000B47                                 L249:
  1147 00000B47 FF 75 08                        	PUSH	DWORD [8+EBP]
  1148 00000B4A FF 75 0C                        	PUSH	DWORD [12+EBP]
  1149 00000B4D FF 75 20                        	PUSH	DWORD [32+EBP]
  1150 00000B50 FF 75 24                        	PUSH	DWORD [36+EBP]
  1151 00000B53 53                              	PUSH	EBX
  1152 00000B54 EB E4                           	JMP	L230
  1153 00000B56                                 L248:
  1154 00000B56 89 DE                           	MOV	ESI,EBX
  1155 00000B58 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
  1156 00000B5B 83 E6 FE                        	AND	ESI,-2
  1157 00000B5E 8A 55 24                        	MOV	DL,BYTE [36+EBP]
  1158 00000B61 0F AF 46 04                     	IMUL	EAX,DWORD [4+ESI]
  1159 00000B65 03 45 0C                        	ADD	EAX,DWORD [12+EBP]
  1160 00000B68 8B 0E                           	MOV	ECX,DWORD [ESI]
  1161 00000B6A 83 E3 01                        	AND	EBX,1
  1162 00000B6D 88 14 08                        	MOV	BYTE [EAX+ECX*1],DL
  1163 00000B70 0F 85 FFFFFE9C                  	JNE	L179
  1164 00000B76 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
  1165 00000B79 40                              	INC	EAX
  1166 00000B7A 50                              	PUSH	EAX
  1167 00000B7B 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
  1168 00000B7E 40                              	INC	EAX
  1169 00000B7F 50                              	PUSH	EAX
  1170 00000B80 FF 75 08                        	PUSH	DWORD [8+EBP]
  1171 00000B83 FF 75 0C                        	PUSH	DWORD [12+EBP]
  1172 00000B86 EB B1                           	JMP	L234
  1173 00000B88                                 L247:
  1174 00000B88 8B 45 20                        	MOV	EAX,DWORD [32+EBP]
  1175 00000B8B 83 C0 0F                        	ADD	EAX,15
  1176 00000B8E 83 E0 F0                        	AND	EAX,-16
  1177 00000B91 50                              	PUSH	EAX
  1178 00000B92 8D 04 1F                        	LEA	EAX,DWORD [EDI+EBX*1]
  1179 00000B95 FF 75 24                        	PUSH	DWORD [36+EBP]
  1180 00000B98 50                              	PUSH	EAX
  1181 00000B99 E8 [00000000]                   	CALL	_memman_free
  1182 00000B9E E9 FFFFFEA5                     	JMP	L231
  1183 00000BA3                                 L246:
  1184 00000BA3 8B 45 20                        	MOV	EAX,DWORD [32+EBP]
  1185 00000BA6 83 C0 0F                        	ADD	EAX,15
  1186 00000BA9 83 E0 F0                        	AND	EAX,-16
  1187 00000BAC 50                              	PUSH	EAX
  1188 00000BAD 8D 04 1F                        	LEA	EAX,DWORD [EDI+EBX*1]
  1189 00000BB0 50                              	PUSH	EAX
  1190 00000BB1 E8 [00000000]                   	CALL	_memman_alloc
  1191 00000BB6 89 45 44                        	MOV	DWORD [68+EBP],EAX
  1192 00000BB9 E9 FFFFFE70                     	JMP	L232
  1193 00000BBE                                 L245:
  1194 00000BBE 01 FB                           	ADD	EBX,EDI
  1195 00000BC0 53                              	PUSH	EBX
  1196 00000BC1 E8 [00000000]                   	CALL	_memman_init
  1197 00000BC6 83 65 20 F0                     	AND	DWORD [32+EBP],-16
  1198 00000BCA FF 75 20                        	PUSH	DWORD [32+EBP]
  1199 00000BCD FF 75 24                        	PUSH	DWORD [36+EBP]
  1200 00000BD0 53                              	PUSH	EBX
  1201 00000BD1 E8 [00000000]                   	CALL	_memman_free
  1202 00000BD6 83 C4 10                        	ADD	ESP,16
  1203 00000BD9 E9 FFFFFE34                     	JMP	L179
  1204 00000BDE                                 L244:
  1205 00000BDE FF 75 08                        	PUSH	DWORD [8+EBP]
  1206 00000BE1 FF 75 0C                        	PUSH	DWORD [12+EBP]
  1207 00000BE4 FF 75 20                        	PUSH	DWORD [32+EBP]
  1208 00000BE7 89 DE                           	MOV	ESI,EBX
  1209 00000BE9 FF 75 24                        	PUSH	DWORD [36+EBP]
  1210 00000BEC 83 E6 FE                        	AND	ESI,-2
  1211 00000BEF 0F B6 45 10                     	MOVZX	EAX,BYTE [16+EBP]
  1212 00000BF3 50                              	PUSH	EAX
  1213 00000BF4 FF 76 04                        	PUSH	DWORD [4+ESI]
  1214 00000BF7 FF 36                           	PUSH	DWORD [ESI]
  1215 00000BF9 E8 [00000000]                   	CALL	_boxfill8
  1216 00000BFE 83 C4 1C                        	ADD	ESP,28
  1217 00000C01 E9 FFFFFF1A                     	JMP	L237
  1218 00000C06                                 L243:
  1219 00000C06 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
  1220 00000C09 89 DE                           	MOV	ESI,EBX
  1221 00000C0B 01 F8                           	ADD	EAX,EDI
  1222 00000C0D 83 E6 FE                        	AND	ESI,-2
  1223 00000C10 50                              	PUSH	EAX
  1224 00000C11 0F BE 45 24                     	MOVSX	EAX,BYTE [36+EBP]
  1225 00000C15 50                              	PUSH	EAX
  1226 00000C16 FF 75 08                        	PUSH	DWORD [8+EBP]
  1227 00000C19 FF 75 0C                        	PUSH	DWORD [12+EBP]
  1228 00000C1C FF 76 04                        	PUSH	DWORD [4+ESI]
  1229 00000C1F FF 36                           	PUSH	DWORD [ESI]
  1230 00000C21 E8 [00000000]                   	CALL	_putfonts8_asc
  1231 00000C26 83 C4 18                        	ADD	ESP,24
  1232 00000C29 83 E3 01                        	AND	EBX,1
  1233 00000C2C 0F 85 FFFFFDE0                  	JNE	L179
  1234 00000C32 8B 55 0C                        	MOV	EDX,DWORD [12+EBP]
  1235 00000C35 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
  1236 00000C38 8B 4D 20                        	MOV	ECX,DWORD [32+EBP]
  1237 00000C3B 83 C0 10                        	ADD	EAX,16
  1238 00000C3E 50                              	PUSH	EAX
  1239 00000C3F 8D 04 CA                        	LEA	EAX,DWORD [EDX+ECX*8]
  1240 00000C42 50                              	PUSH	EAX
  1241 00000C43 FF 75 08                        	PUSH	DWORD [8+EBP]
  1242 00000C46 52                              	PUSH	EDX
  1243 00000C47 E9 FFFFFEED                     	JMP	L234
  1244 00000C4C                                 L242:
  1245 00000C4C 50                              	PUSH	EAX
  1246 00000C4D 01 FB                           	ADD	EBX,EDI
  1247 00000C4F E8 [00000000]                   	CALL	_sheet_alloc
  1248 00000C54 8B 55 F0                        	MOV	EDX,DWORD [-16+EBP]
  1249 00000C57 89 C6                           	MOV	ESI,EAX
  1250 00000C59 89 50 24                        	MOV	DWORD [36+EAX],EDX
  1251 00000C5C 83 48 1C 10                     	OR	DWORD [28+EAX],16
  1252 00000C60 FF 75 24                        	PUSH	DWORD [36+EBP]
  1253 00000C63 FF 75 08                        	PUSH	DWORD [8+EBP]
  1254 00000C66 FF 75 0C                        	PUSH	DWORD [12+EBP]
  1255 00000C69 53                              	PUSH	EBX
  1256 00000C6A 50                              	PUSH	EAX
  1257 00000C6B E8 [00000000]                   	CALL	_sheet_setbuf
  1258 00000C70 8B 45 20                        	MOV	EAX,DWORD [32+EBP]
  1259 00000C73 6A 00                           	PUSH	0
  1260 00000C75 01 F8                           	ADD	EAX,EDI
  1261 00000C77 50                              	PUSH	EAX
  1262 00000C78 FF 75 08                        	PUSH	DWORD [8+EBP]
  1263 00000C7B FF 75 0C                        	PUSH	DWORD [12+EBP]
  1264 00000C7E 53                              	PUSH	EBX
  1265 00000C7F E8 [00000000]                   	CALL	_make_window8
  1266 00000C84 83 C4 2C                        	ADD	ESP,44
  1267 00000C87 6A 32                           	PUSH	50
  1268 00000C89 6A 64                           	PUSH	100
  1269 00000C8B 56                              	PUSH	ESI
  1270 00000C8C E8 [00000000]                   	CALL	_sheet_slide
  1271 00000C91 6A 03                           	PUSH	3
  1272 00000C93 56                              	PUSH	ESI
  1273 00000C94 E8 [00000000]                   	CALL	_sheet_updown
  1274 00000C99 89 75 44                        	MOV	DWORD [68+EBP],ESI
  1275 00000C9C E9 FFFFFE9E                     	JMP	L233
  1276 00000CA1                                 L241:
  1277 00000CA1 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
  1278 00000CA4 83 C0 30                        	ADD	EAX,48
  1279 00000CA7 E9 FFFFFD68                     	JMP	L177
  1280 00000CAC                                 L240:
  1281 00000CAC FF 75 20                        	PUSH	DWORD [32+EBP]
  1282 00000CAF 8D 04 1F                        	LEA	EAX,DWORD [EDI+EBX*1]
  1283 00000CB2 50                              	PUSH	EAX
  1284 00000CB3 FF 75 EC                        	PUSH	DWORD [-20+EBP]
  1285 00000CB6 E8 FFFFF7BB                     	CALL	_cons_putstr1
  1286 00000CBB E9 FFFFFD88                     	JMP	L231
  1287 00000CC0                                 L239:
  1288 00000CC0 8D 04 1F                        	LEA	EAX,DWORD [EDI+EBX*1]
  1289 00000CC3 50                              	PUSH	EAX
  1290 00000CC4 FF 75 EC                        	PUSH	DWORD [-20+EBP]
  1291 00000CC7 E8 FFFFF77C                     	CALL	_cons_putstr0
  1292 00000CCC E9 FFFFFD5D                     	JMP	L232
  1293 00000CD1                                 L238:
  1294 00000CD1 6A 01                           	PUSH	1
  1295 00000CD3 0F B6 45 24                     	MOVZX	EAX,BYTE [36+EBP]
  1296 00000CD7 50                              	PUSH	EAX
  1297 00000CD8 FF 75 EC                        	PUSH	DWORD [-20+EBP]
  1298 00000CDB E8 FFFFF60A                     	CALL	_cons_putchar
  1299 00000CE0 E9 FFFFFD63                     	JMP	L231
  1300                                          [SECTION .data]
  1301 0000007F                                 LC11:
  1302 0000007F 0A 49 4E 54 20 30 43 20 3A 0A   	DB	0x0A,"INT 0C :",0x0A," Stack Exception.",0x0A,0x00
       00000089 20 53 74 61 63 6B 20 45 78 63 
       00000093 65 70 74 69 6F 6E 2E 0A 00 
  1303 0000009C                                 LC12:
  1304 0000009C 45 49 50 20 3D 20 25 30 38 58   	DB	"EIP = %08X",0x0A,0x00
       000000A6 0A 00 
  1305                                          [SECTION .text]
  1306 00000CE5                                 	GLOBAL	_inthandler0c
  1307 00000CE5                                 _inthandler0c:
  1308 00000CE5 55                              	PUSH	EBP
  1309 00000CE6 89 E5                           	MOV	EBP,ESP
  1310 00000CE8 57                              	PUSH	EDI
  1311 00000CE9 56                              	PUSH	ESI
  1312 00000CEA 53                              	PUSH	EBX
  1313 00000CEB 8D 5D D4                        	LEA	EBX,DWORD [-44+EBP]
  1314 00000CEE 83 EC 20                        	SUB	ESP,32
  1315 00000CF1 8B 3D 00000FEC                  	MOV	EDI,DWORD [4076]
  1316 00000CF7 E8 [00000000]                   	CALL	_task_now
  1317 00000CFC 68 [0000007F]                   	PUSH	LC11
  1318 00000D01 89 C6                           	MOV	ESI,EAX
  1319 00000D03 57                              	PUSH	EDI
  1320 00000D04 83 C6 30                        	ADD	ESI,48
  1321 00000D07 E8 FFFFF73C                     	CALL	_cons_putstr0
  1322 00000D0C 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
  1323 00000D0F FF 70 2C                        	PUSH	DWORD [44+EAX]
  1324 00000D12 68 [0000009C]                   	PUSH	LC12
  1325 00000D17 53                              	PUSH	EBX
  1326 00000D18 E8 [00000000]                   	CALL	_sprintf
  1327 00000D1D 53                              	PUSH	EBX
  1328 00000D1E 57                              	PUSH	EDI
  1329 00000D1F E8 FFFFF724                     	CALL	_cons_putstr0
  1330 00000D24 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
  1331 00000D27 5B                              	POP	EBX
  1332 00000D28 89 F0                           	MOV	EAX,ESI
  1333 00000D2A 5E                              	POP	ESI
  1334 00000D2B 5F                              	POP	EDI
  1335 00000D2C 5D                              	POP	EBP
  1336 00000D2D C3                              	RET
  1337                                          [SECTION .data]
  1338 000000A8                                 LC13:
  1339 000000A8 0A 49 4E 54 20 30 44 20 3A 0A   	DB	0x0A,"INT 0D :",0x0A," General Protected Exception.",0x0A,0x00
       000000B2 20 47 65 6E 65 72 61 6C 20 50 
       000000BC 72 6F 74 65 63 74 65 64 20 45 
       000000C6 78 63 65 70 74 69 6F 6E 2E 0A 
       000000D0 00 
  1340                                          [SECTION .text]
  1341 00000D2E                                 	GLOBAL	_inthandler0d
  1342 00000D2E                                 _inthandler0d:
  1343 00000D2E 55                              	PUSH	EBP
  1344 00000D2F 89 E5                           	MOV	EBP,ESP
  1345 00000D31 57                              	PUSH	EDI
  1346 00000D32 56                              	PUSH	ESI
  1347 00000D33 53                              	PUSH	EBX
  1348 00000D34 8D 5D D4                        	LEA	EBX,DWORD [-44+EBP]
  1349 00000D37 83 EC 20                        	SUB	ESP,32
  1350 00000D3A 8B 3D 00000FEC                  	MOV	EDI,DWORD [4076]
  1351 00000D40 E8 [00000000]                   	CALL	_task_now
  1352 00000D45 68 [000000A8]                   	PUSH	LC13
  1353 00000D4A 89 C6                           	MOV	ESI,EAX
  1354 00000D4C 57                              	PUSH	EDI
  1355 00000D4D 83 C6 30                        	ADD	ESI,48
  1356 00000D50 E8 FFFFF6F3                     	CALL	_cons_putstr0
  1357 00000D55 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
  1358 00000D58 FF 70 2C                        	PUSH	DWORD [44+EAX]
  1359 00000D5B 68 [0000009C]                   	PUSH	LC12
  1360 00000D60 53                              	PUSH	EBX
  1361 00000D61 E8 [00000000]                   	CALL	_sprintf
  1362 00000D66 53                              	PUSH	EBX
  1363 00000D67 57                              	PUSH	EDI
  1364 00000D68 E8 FFFFF6DB                     	CALL	_cons_putstr0
  1365 00000D6D 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
  1366 00000D70 5B                              	POP	EBX
  1367 00000D71 89 F0                           	MOV	EAX,ESI
  1368 00000D73 5E                              	POP	ESI
  1369 00000D74 5F                              	POP	EDI
  1370 00000D75 5D                              	POP	EBP
  1371 00000D76 C3                              	RET
  1372 00000D77                                 	GLOBAL	_hrb_api_linewin
  1373 00000D77                                 _hrb_api_linewin:
  1374 00000D77 55                              	PUSH	EBP
  1375 00000D78 89 E5                           	MOV	EBP,ESP
  1376 00000D7A 57                              	PUSH	EDI
  1377 00000D7B 56                              	PUSH	ESI
  1378 00000D7C 53                              	PUSH	EBX
  1379 00000D7D 83 EC 0C                        	SUB	ESP,12
  1380 00000D80 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
  1381 00000D83 8B 45 14                        	MOV	EAX,DWORD [20+EBP]
  1382 00000D86 89 D9                           	MOV	ECX,EBX
  1383 00000D88 8B 55 18                        	MOV	EDX,DWORD [24+EBP]
  1384 00000D8B C1 E1 0A                        	SAL	ECX,10
  1385 00000D8E 89 D7                           	MOV	EDI,EDX
  1386 00000D90 89 4D F0                        	MOV	DWORD [-16+EBP],ECX
  1387 00000D93 89 C6                           	MOV	ESI,EAX
  1388 00000D95 8B 4D 10                        	MOV	ECX,DWORD [16+EBP]
  1389 00000D98 2B 7D 10                        	SUB	EDI,DWORD [16+EBP]
  1390 00000D9B C1 E1 0A                        	SAL	ECX,10
  1391 00000D9E 29 DE                           	SUB	ESI,EBX
  1392 00000DA0 89 4D EC                        	MOV	DWORD [-20+EBP],ECX
  1393 00000DA3 0F 88 000000A3                  	JS	L283
  1394 00000DA9                                 L262:
  1395 00000DA9 85 FF                           	TEST	EDI,EDI
  1396 00000DAB 0F 88 00000094                  	JS	L284
  1397 00000DB1                                 L263:
  1398 00000DB1 39 FE                           	CMP	ESI,EDI
  1399 00000DB3 7C 62                           	JL	L264
  1400 00000DB5 8D 4E 01                        	LEA	ECX,DWORD [1+ESI]
  1401 00000DB8 39 C3                           	CMP	EBX,EAX
  1402 00000DBA BE FFFFFC00                     	MOV	ESI,-1024
  1403 00000DBF 7F 05                           	JG	L266
  1404 00000DC1 BE 00000400                     	MOV	ESI,1024
  1405 00000DC6                                 L266:
  1406 00000DC6 39 55 10                        	CMP	DWORD [16+EBP],EDX
  1407 00000DC9 7F 46                           	JG	L267
  1408 00000DCB 2B 55 10                        	SUB	EDX,DWORD [16+EBP]
  1409 00000DCE 42                              	INC	EDX
  1410 00000DCF                                 L282:
  1411 00000DCF C1 E2 0A                        	SAL	EDX,10
  1412 00000DD2 89 D0                           	MOV	EAX,EDX
  1413 00000DD4 99                              	CDQ
  1414 00000DD5 F7 F9                           	IDIV	ECX
  1415 00000DD7 89 C7                           	MOV	EDI,EAX
  1416 00000DD9                                 L269:
  1417 00000DD9 85 C9                           	TEST	ECX,ECX
  1418 00000DDB 7E 2C                           	JLE	L280
  1419 00000DDD 89 CB                           	MOV	EBX,ECX
  1420 00000DDF                                 L278:
  1421 00000DDF 8B 55 08                        	MOV	EDX,DWORD [8+EBP]
  1422 00000DE2 8B 45 EC                        	MOV	EAX,DWORD [-20+EBP]
  1423 00000DE5 C1 F8 0A                        	SAR	EAX,10
  1424 00000DE8 8B 4D F0                        	MOV	ECX,DWORD [-16+EBP]
  1425 00000DEB 0F AF 42 04                     	IMUL	EAX,DWORD [4+EDX]
  1426 00000DEF C1 F9 0A                        	SAR	ECX,10
  1427 00000DF2 89 4D E8                        	MOV	DWORD [-24+EBP],ECX
  1428 00000DF5 8B 0A                           	MOV	ECX,DWORD [EDX]
  1429 00000DF7 03 45 E8                        	ADD	EAX,DWORD [-24+EBP]
  1430 00000DFA 8A 55 1C                        	MOV	DL,BYTE [28+EBP]
  1431 00000DFD 88 14 08                        	MOV	BYTE [EAX+ECX*1],DL
  1432 00000E00 01 75 F0                        	ADD	DWORD [-16+EBP],ESI
  1433 00000E03 01 7D EC                        	ADD	DWORD [-20+EBP],EDI
  1434 00000E06 4B                              	DEC	EBX
  1435 00000E07 75 D6                           	JNE	L278
  1436 00000E09                                 L280:
  1437 00000E09 83 C4 0C                        	ADD	ESP,12
  1438 00000E0C 5B                              	POP	EBX
  1439 00000E0D 5E                              	POP	ESI
  1440 00000E0E 5F                              	POP	EDI
  1441 00000E0F 5D                              	POP	EBP
  1442 00000E10 C3                              	RET
  1443 00000E11                                 L267:
  1444 00000E11 2B 55 10                        	SUB	EDX,DWORD [16+EBP]
  1445 00000E14 4A                              	DEC	EDX
  1446 00000E15 EB B8                           	JMP	L282
  1447 00000E17                                 L264:
  1448 00000E17 8D 4F 01                        	LEA	ECX,DWORD [1+EDI]
  1449 00000E1A 39 55 10                        	CMP	DWORD [16+EBP],EDX
  1450 00000E1D BF FFFFFC00                     	MOV	EDI,-1024
  1451 00000E22 7F 05                           	JG	L271
  1452 00000E24 BF 00000400                     	MOV	EDI,1024
  1453 00000E29                                 L271:
  1454 00000E29 39 C3                           	CMP	EBX,EAX
  1455 00000E2B 7F 11                           	JG	L272
  1456 00000E2D 29 D8                           	SUB	EAX,EBX
  1457 00000E2F 8D 50 01                        	LEA	EDX,DWORD [1+EAX]
  1458 00000E32                                 L281:
  1459 00000E32 C1 E2 0A                        	SAL	EDX,10
  1460 00000E35 89 D0                           	MOV	EAX,EDX
  1461 00000E37 99                              	CDQ
  1462 00000E38 F7 F9                           	IDIV	ECX
  1463 00000E3A 89 C6                           	MOV	ESI,EAX
  1464 00000E3C EB 9B                           	JMP	L269
  1465 00000E3E                                 L272:
  1466 00000E3E 29 D8                           	SUB	EAX,EBX
  1467 00000E40 8D 50 FF                        	LEA	EDX,DWORD [-1+EAX]
  1468 00000E43 EB ED                           	JMP	L281
  1469 00000E45                                 L284:
  1470 00000E45 F7 DF                           	NEG	EDI
  1471 00000E47 E9 FFFFFF65                     	JMP	L263
  1472 00000E4C                                 L283:
  1473 00000E4C F7 DE                           	NEG	ESI
  1474 00000E4E E9 FFFFFF56                     	JMP	L262
